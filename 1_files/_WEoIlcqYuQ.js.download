if (self.CavalryLogger) { CavalryLogger.start_js(["xqa\/K"]); }

__d("StoriesReactionStickerMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"ReactStoryCardReactionStickerData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"react_story_card_reaction_sticker",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"ReactStoryCardReactionStickerResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"story_card_reaction_sticker",storageKey:null,args:null,concreteType:"StoryCardReactionSticker",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"StoriesReactionStickerMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"StoriesReactionStickerMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"StoriesReactionStickerMutation",id:"2107432889344441",text:null,metadata:{}}}}();e.exports=a}),null);
__d("StoriesReactionSticker_overlay.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesReactionSticker_overlay",type:"StoryOverlayReactionSticker",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"reaction_sticker",storageKey:null,args:null,concreteType:"StoryCardReactionSticker",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[{kind:"FragmentSpread",name:"StoriesCardOverlayPositioner_bounds",args:null}]},{kind:"FragmentSpread",name:"ReactionStickerKeyframe_overlay",args:null}]};e.exports=a}),null);
__d("ReactionStickerKeyframe_overlay.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"x",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"y",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null};return{kind:"Fragment",name:"ReactionStickerKeyframe_overlay",type:"StoryOverlayReactionSticker",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"reaction_sticker",storageKey:null,args:null,concreteType:"StoryCardReactionSticker",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"sticker_asset",storageKey:null,args:null,concreteType:"InspirationsStickerImageAsset",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"sticker_animation_assets",storageKey:null,args:null,concreteType:"InspirationsStickerAnimationAssetWithType",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"type",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"asset",storageKey:null,args:null,concreteType:"InspirationsStickerAnimationAsset",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"keyframe_uri",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"initial_state_bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[a,b,c,d]}]}]}]}]},{kind:"LinkedField",alias:null,name:"bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[d,a,b,c]}]}}();e.exports=a}),null);
__d("ReactionStickerKeyframe.react",["Keyframes.react","React","StoriesRelay","emptyFunction","stylex","ReactionStickerKeyframe_overlay.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("StoriesRelay").createFragmentContainer;b("StoriesRelay").graphql;function a(a){__p&&__p();var c,d,e=function(f){__p&&__p();var g,h={height:0,key:"",keyframe_uri:"",onRepeatEnd:b("emptyFunction"),repeatCount:1,type:"AFFORDANCE",width:0,x:0,y:0};g=(g=a.overlay)==null?void 0:(g=g.reaction_sticker)==null?void 0:(g=g.sticker_asset)==null?void 0:g.sticker_animation_assets;if(!g)return null;g=(g=g.find(function(a){return f===a.type}))==null?void 0:g.asset;if(!g)return null;g=g;var i=g.initial_state_bounds;g=g.keyframe_uri;if(!i)return null;var c=i.height,d=i.width,e=i.x;i=i.y;if(typeof d!=="number"||typeof c!=="number"||typeof e!=="number"||typeof i!=="number"||typeof g!=="string")return null;h.width=d;h.height=c;h.x=e;h.y=i;h.keyframe_uri=g;h.key=a.uniqueKey;h.type=a.type;f==="TAP"&&(h.repeatCount=1,h.onRepeatEnd=function(){a.tapOnReaptEnd(a.uniqueKey)});f==="AFFORDANCE"&&(h.repeatCount=Infinity,h.onRepeatEnd=b("emptyFunction"));return h};e=e(a.type);if(!e)return null;var f=e.height,g=e.key,h=e.keyframe_uri,i=e.onRepeatEnd,j=e.repeatCount,k=e.width,l=e.x,m=e.y,n=a.containerHeight,o=a.containerWidth,p=a.overlay;c=p==null?void 0:(c=p.bounds)==null?void 0:c.width;d=p==null?void 0:(d=p.bounds)==null?void 0:d.height;if(p==null||typeof c!=="number"||typeof d!=="number")return null;p=c*o;var q=d*n;n=n*d/q;d=o*c/p;o=q/f;c=p/k;q={left:"-"+l*c+"px",position:"absolute",top:"-"+m*o+"px",transform:"scaleY("+n+") scaleX("+d+")"};return b("React").jsx(b("Keyframes.react"),{assetName:"reaction_sticker",className:e.type==="TAP"?"pmk7jnqg hzruof5a":"",height:o,onRepeatEnd:i,projectName:"facebook_stories",repeatCount:j,source:h,style:q,width:c},g)}e.exports=c(a,{overlay:g!==void 0?g:g=b("ReactionStickerKeyframe_overlay.graphql")})}),null);
__d("StoriesReactionSticker.react",["FBLogger","React","ReactionStickerKeyframe.react","StoriesCardOverlayPositioner.react","StoriesEnums","StoriesPauseReasons","StoriesRelay","StoriesUniqueID","stylex","StoriesReactionStickerMutation.graphql","StoriesReactionSticker_overlay.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("React").useRef,j=b("React").useState,k=b("StoriesEnums").STORY_REACTION_STICKERS_CONSTANTS,l=(c=b("StoriesRelay")).commitMutation;c.graphql;var m=c.useRelayEnvironment;d=c.createFragmentContainer;function n(a,b){var c=Date.now();return function(){c+b-Date.now()<0&&(a(),c=Date.now())}}function a(a){__p&&__p();var c=m(),d=j([{key:"",type:"AFFORDANCE"}]),e=d[0],f=d[1],g=i(null),h=i(null),p=i(0);d=n(function(){a.setPause(!0,b("StoriesPauseReasons").CLICK_ON_OVERLAY_STICKER),p.current+=1,u(),s(),g.current=window.setTimeout(function(){r()},k.HOLD_DELAY)},k.ANIMATIONS_INTERVAL_THROTTLE);var q=function(c){f(function(d){d=d.filter(function(a){return a.key!==c});d.length<2&&a.setPause(!1,b("StoriesPauseReasons").CLICK_ON_OVERLAY_STICKER);return d})},r=function a(){p.current+=1,u(),h.current=window.setTimeout(function(){s(),a()},k.ANIMATIONS_INTERVAL_THROTTLE)},s=function(){f(function(a){return[].concat(a,[{key:b("StoriesUniqueID")(),type:"TAP"}])})},t=function(){window.clearTimeout(g.current),window.clearTimeout(h.current)},u=function(){var d;d=(d=a.overlay)==null?void 0:(d=d.reaction_sticker)==null?void 0:d.id;var e=a.logger;if(d===null)return;l(c,{mutation:o,onCompleted:function(a,b){e.replyAttemptCompletedLog("reaction_sticker_react",b==null?null:b[0])},onError:function(a){e.replyAttemptCompletedLog("reaction_sticker_react",a),b("FBLogger")("fbstories").catching(a).warn("Error interacting reaction stickers. ")},variables:{input:{client_mutation_id:b("StoriesUniqueID")(),count:p.current,story_card_reaction_sticker_id:d}}})},v=a.containerHeight,w=a.containerWidth,x=a.overlay,y=x==null?void 0:x.bounds;return y==null?null:b("React").jsx(b("StoriesCardOverlayPositioner.react"),{bounds:y,containerHeight:v,containerWidth:w,children:b("React").jsx("div",{className:"k4urcfbm fi2e5rcv pmk7jnqg oqq733wu datstx6m nhd2j8a9",onMouseDown:d,onMouseLeave:t,onMouseUp:t,children:e.map(function(a,c){return b("React").jsx(b("ReactionStickerKeyframe.react"),{containerHeight:v,containerWidth:w,overlay:x,tapOnReaptEnd:q,type:a.type,uniqueKey:a.key},a.key)})})})}var o=g!==void 0?g:g=b("StoriesReactionStickerMutation.graphql");e.exports=d(a,{overlay:h!==void 0?h:h=b("StoriesReactionSticker_overlay.graphql")})}),null);
__d("StoriesMediaStoreActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:StoriesMediaStoreActionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:StoriesMediaStoreActionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:StoriesMediaStoreActionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setActiveStoriesCount=function(a){this.$1.active_stories_count=a;return this};c.setArchiveSavingModeLastModifiedTime=function(a){this.$1.archive_saving_mode_last_modified_time=a;return this};c.setButtonName=function(a){this.$1.button_name=a;return this};c.setCameraSystemMediaAttributes=function(a){this.$1.camera_system_media_attributes=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setClientArchiveID=function(a){this.$1.client_archive_id=a;return this};c.setDialogName=function(a){this.$1.dialog_name=a;return this};c.setDialogOptionName=function(a){this.$1.dialog_option_name=a;return this};c.setEntryPoint=function(a){this.$1.entry_point=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setEventSpecificExtraData=function(a){this.$1.event_specific_extra_data=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setEventType=function(a){this.$1.event_type=a;return this};c.setGalleryTab=function(a){this.$1.gallery_tab=a;return this};c.setMediaContentID=function(a){this.$1.media_content_id=a;return this};c.setMediaFbid=function(a){this.$1.media_fbid=a;return this};c.setNetworkQueryName=function(a){this.$1.network_query_name=a;return this};c.setProductName=function(a){this.$1.product_name=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setSavedPhotosUseCase=function(a){this.$1.saved_photos_use_case=a;return this};c.setSavingDestinations=function(a){this.$1.saving_destinations=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setServerOriginalMediaFbid=function(a){this.$1.server_original_media_fbid=a;return this};c.setServerOriginalStoryCardFbid=function(a){this.$1.server_original_story_card_fbid=a;return this};c.setServerOriginalUploadedVideoFbid=function(a){this.$1.server_original_uploaded_video_fbid=a;return this};c.setSessionDurationMs=function(a){this.$1.session_duration_ms=a;return this};c.setSessionIdsMap=function(a){this.$1.session_ids_map=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setSessionStartReasonsMap=function(a){this.$1.session_start_reasons_map=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setStoryCardFbid=function(a){this.$1.story_card_fbid=a;return this};c.setStoryCardType=function(a){this.$1.story_card_type=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={active_stories_count:!0,archive_saving_mode_last_modified_time:!0,button_name:!0,camera_system_media_attributes:!0,client_archive_id:!0,dialog_name:!0,dialog_option_name:!0,entry_point:!0,event:!0,event_specific_extra_data:!0,event_type:!0,gallery_tab:!0,media_content_id:!0,media_fbid:!0,network_query_name:!0,product_name:!0,reason:!0,saved_photos_use_case:!0,saving_destinations:!0,server_original_media_fbid:!0,server_original_story_card_fbid:!0,server_original_uploaded_video_fbid:!0,session_duration_ms:!0,session_ids_map:!0,session_start_reasons_map:!0,story_card_fbid:!0,story_card_type:!0,surface:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("FBStoriesArchiveLoggingHelper",["CurrentUser","DeleteMediaAttemptedFalcoEvent","FBStoriesLoggingConstants","OpenMediaFalcoEvent","OpenSeenSummaryFalcoEvent","StoriesLoggerSession","StoriesMediaStoreActionsTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={deleteStoryCardLog:function(a,c){b("DeleteMediaAttemptedFalcoEvent").log(function(){return{thread_id:a,media_id:c,story_owner:b("CurrentUser").getID(),source:b("FBStoriesLoggingConstants").SOURCES.ARCHIVE}})},selectMediaLog:function(a,b){g._archiveEventLog(a,b,"select_media")},openMediaInComposerLog:function(a,b){g._archiveEventLog(a,b,"open_media_in_camera")},_archiveEventLog:function(a,c,d){new(b("StoriesMediaStoreActionsTypedLogger"))().setProductName("stories_archive").setEvent(d).setStoryCardFbid(a).setMediaFbid(c).setEventType("client").log()},openSeenSummaryLog:function(a,c){b("OpenSeenSummaryFalcoEvent").log(function(){return{thread_id:a,media_id:c,story_owner:b("CurrentUser").getID(),source:b("FBStoriesLoggingConstants").SOURCES.ARCHIVE,viewer_session_id:b("StoriesLoggerSession").getViewerSessionID()}})},openMediaLog:function(a,c){b("OpenMediaFalcoEvent").log(function(){return{thread_id:a,media_id:c,story_owner:b("CurrentUser").getID(),source:b("FBStoriesLoggingConstants").SOURCES.ARCHIVE,viewer_session_id:b("StoriesLoggerSession").getViewerSessionID()}})}};e.exports=g}),null);
__d("XReactSproutComposerShareMediaFromArchiveDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/share_from_archive/dialog/",{extraConfig:{type:"StringToStringMap"},loggingName:{type:"Enum",enumType:1},taggerType:{type:"Enum",enumType:1},archivedStoryCardIDs:{type:"FBIDSet"},__asyncDialog:{type:"Int"}})}),null);