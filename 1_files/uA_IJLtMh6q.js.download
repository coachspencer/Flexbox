if (self.CavalryLogger) { CavalryLogger.start_js(["+O4Tf"]); }

__d("useAdsImageData",["React","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect,h=b("React").useState,i=b("immutable").Map().asMutable();function a(a){__p&&__p();var b=h(null),c=b[0],d=b[1];g(function(){__p&&__p();if(a==null)d(null);else if(i.has(a))d(i.get(a));else{var b=!0,c=new Image();c.onload=function(){i.set(a,c),b&&d(c)};c.src=a;return function(){b=!1}}},[a]);return c}e.exports=a}),null);
__d("AdsCroppedImage.react",["React","ResponsiveBlock.react","useAdsImageData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useState,h=function(a){var b=a[0],c=b[0];b=b[1];a=a[1];var d=a[0];a=a[1];return Math.abs(b-a)/Math.abs(c-d)*100},i={height:0,width:0};function a(a){__p&&__p();var c=a.src;a=a.crop;var d=a?h(a):0,e=g(0),f=e[0];e=e[1];var j=b("useAdsImageData")(c)||i,k=a?Math.abs(a[0][0]-a[1][0]):j.width,l=k?j.width/k:0;f=k?f/k:0;k=j.width>0?j.height/j.width*100:0;j=a?a[0]:[];a=j[0];a=a===void 0?0:a;j=j[1];j=j===void 0?0:j;return b("React").jsx(b("ResponsiveBlock.react"),{onResize:e,children:b("React").jsx("div",{style:{paddingBottom:(d||k)+"%",overflow:"hidden",position:"relative"},children:b("React").jsx("div",{style:{position:"absolute",width:l*100+"%",top:-f*j+"px",left:-f*a+"px"},children:b("React").jsx("div",{style:{backgroundImage:"url("+c+")",backgroundSize:"cover",paddingBottom:k+"%"}})})})})}e.exports=a}),null);
__d("AdsImageCover.react",["AdsCroppedImage.react","React","useAdsImageData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={height:0,width:0};function a(a){var c=a.src,d=a.crop,e=a.targetHeight;a=a.targetWidth;var f=b("useAdsImageData")(c)||g;f=d==null?[[0,0],[f.width,f.height]]:d;d=h({crop:f,targetHeight:e,targetWidth:a});return b("React").jsx("div",{style:{width:a+"px",height:e+"px"},children:b("React").jsx(b("AdsCroppedImage.react"),{crop:d,src:c})})}function h(a){__p&&__p();var b=a.crop,c=a.targetHeight;a=a.targetWidth;var d=b[0],e=d[0];d=d[1];b=b[1];var f=b[0];b=b[1];var g=f-e,h=b-d,i=g/a,j=h/c;if(c*i>=h){f=(f+e)/2;e=a*j;return[[f-e/2,0],[f+e/2,h]]}else{a=(b+d)/2;j=c*i;return[[0,a-j/2],[g,a+j/2]]}}e.exports=a}),null);
__d("AdsSpinnerCover.react",["cx","FDSSpinner.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=b("joinClasses")(a.className,"_2qei"+(a.show?" _2qej":"")+(a.background==="light"?" _7heh":"")+(a.background==="medium"?" _2qek":"")+(a.background==="dark"?" _2qel":""));a=a.show===!0?b("React").jsx("div",{className:"_2qer","data-testid":a.testID,children:b("React").jsx(b("FDSSpinner.react"),{shade:a.background==="medium"||a.background==="dark"?"light":"dark"})}):null;return b("React").jsx("div",{className:c,children:a})};a.defaultProps={background:"light"};e.exports=a}),null);
__d("AdsMiniPreviewAbstractText.react",["cssVar","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={lightGray:"#BEC3C9",gray:"#8D949E",darkGray:"#606770",blue:"#1877F2",darkBlue:"#1877F2",black:"#000000",white:"#FFFFFF"};function a(a){var c=a.color;c=c===void 0?"lightGray":c;var d=a.children,e=a.fontSize;e=e===void 0?"5px":e;var f=a.letterSpacing;f=f===void 0?"3px":f;a=a.lineHeight;a=a===void 0?"12px":a;return b("React").jsx("span",{style:{backgroundColor:h[c],color:h[c],fontSize:e,letterSpacing:f,lineHeight:a},children:d})}e.exports=a}),null);
__d("AdsMiniPreviewFeedCard.react",["cx","FlexLayout.react","FlexLayoutItem.react","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.className,d=a.colorTheme;d=d===void 0?"light":d;var e=a.callToAction,f=a.description;a=a.headline;return b("React").jsxs(b("FlexLayout.react"),{align:"center",className:c,justify:"all",children:[b("React").jsxs(b("FlexLayoutItem.react"),{className:"_8kd2",grow:1,children:[b("React").jsx("div",{className:"_8kd4",children:b("React").jsx("span",{className:"_8gh-"+(d==="dark"?" _8k9f":"")+(d==="light"?" _8k9g":""),children:a})}),b("React").jsx("div",{className:"_8kd4",children:b("React").jsx("span",{className:"_8gh-"+(d==="dark"?" _8k9f":"")+(d==="light"?" _8k9g":""),children:f})})]}),b("React").jsx(b("FlexLayoutItem.react"),{className:"_8kd3",children:b("React").jsx(b("FlexLayout.react"),{align:"center",className:"_8kd5"+(d==="light"?" _8kd6":"")+(d==="dark"?" _8kd7":""),children:b("React").jsx("div",{className:"_8kd8",children:b("React").jsx("span",{className:"_8gh-"+(d==="dark"?" _8k9f":"")+(d==="light"?" _8k9g":""),children:e})})})})]})}e.exports=a}),null);
__d("AdsMiniPreviewFeedFooter.react",["ix","cx","fbt","AdsMiniPreviewAbstractText.react","FlexLayout.react","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={like:{filled:{20:{dark:g("577866"),light:g("485260")},24:{dark:g("577868"),light:g("485262")}},outline:{20:{dark:g("577874"),light:g("485268")},24:{dark:g("577876"),light:g("485270")}}},comment:{filled:{20:{dark:g("545620"),light:g("560385")},24:{dark:g("545622"),light:g("560386")}},outline:{20:{dark:g("545630"),light:g("560390")},24:{dark:g("545632"),light:g("560391")}}},share:{filled:{20:{dark:g("719581"),light:g("533722")},24:{dark:g("719582"),light:g("533723")}},outline:{20:{dark:g("719586"),light:g("533727")},24:{dark:g("719587"),light:g("533728")}}}},k="60px";function a(a){var c=a.colorTheme,d=a.iconVariant,e=a.iconSize;e=e===void 0?"20":e;var f=a.shouldShowIcons;a=a.textWidth;return b("React").jsxs(b("FlexLayout.react"),{className:"_8kag",justify:"around",children:[b("React").jsx(l,{colorTheme:c,iconName:"like",iconSize:e,iconVariant:d,maxTextWidth:n(f?"26px":k,a),shouldShowIcon:f,children:i._("Like")}),b("React").jsx(l,{colorTheme:c,iconName:"comment",iconSize:e,iconVariant:d,maxTextWidth:n(f?"60px":k,a),shouldShowIcon:f,children:i._("Comment")}),b("React").jsx(l,{colorTheme:c,iconName:"share",iconSize:e,iconVariant:d,maxTextWidth:n(f?"36px":k,a),shouldShowIcon:f,children:i._("Share")})]})}function l(a){var c=a.colorTheme,d=a.children,e=a.iconVariant,f=a.shouldShowIcon,g=a.iconName,h=a.iconSize;a=a.maxTextWidth;return b("React").jsxs(b("FlexLayout.react"),{align:"center",className:"_8kan",children:[f&&b("React").jsx("div",{className:"_8kao",children:b("React").jsx(b("Image.react"),{src:j[g][e][h][c]})}),b("React").jsx(m,{colorTheme:c,maxWidth:a,children:d})]})}function m(a){var c=a.children,d=a.colorTheme;a=a.maxWidth;return b("React").jsx("div",{className:"_8kai",style:{maxWidth:a},children:b("React").jsx(b("AdsMiniPreviewAbstractText.react"),{color:d==="dark"?"gray":"lightGray",letterSpacing:"14px",children:c})})}function n(a,b){return(b=b)!=null?b:a}e.exports=a}),null);
__d("AdsMiniPreviewFeedHeader.react",["ix","cx","fbt","AdsMiniPreviewAbstractText.react","FlexLayout.react","FlexLayoutItem.react","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function a(a){var c=a.avatarSize,d=a.className,e=a.colorTheme;e=e===void 0?"light":e;var f=a.profile,h=a.fontWeight;h=h===void 0?"normal":h;a=a.showEllipsis;a=a===void 0?!0:a;return b("React").jsxs(b("FlexLayout.react"),{align:"center",className:d,children:[b("React").jsx(b("FlexLayoutItem.react"),{className:"_8ghx"+(e==="dark"?" _8k94":"")+(e==="light"?" _8k95":""),grow:0,shrink:0,style:{height:c,width:c},children:f&&b("React").jsx(b("Image.react"),{src:f.imageURL,width:c})}),b("React").jsx(b("FlexLayoutItem.react"),{className:"_8ghy"+(e==="dark"?" _8k9c":"")+(e==="light"?" _8k9d":"")+(f?"":" _8ghz"),grow:1,style:{fontWeight:h},children:f?f.name:b("React").jsx(b("AdsMiniPreviewAbstractText.react"),{color:e==="dark"?"gray":"lightGray",letterSpacing:"10px",lineHeight:"14px",children:i._("Page")})}),a?b("React").jsx(b("FlexLayoutItem.react"),{className:"_8gh_",grow:0,children:b("React").jsx(b("Image.react"),{src:e==="dark"?g("494653"):g("507414")})}):null]})}e.exports=a}),null);
__d("AdsMiniPreviewIGFeedFooter.react",["ix","cx","AdsMiniPreviewAbstractText.react","FlexLayout.react","Image.react","React","asset","range"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={dark:{heart:g("489215"),chat:g("494540"),direct:g("583733"),bookmark:g("481182")},light:{heart:g("837439"),chat:g("675185"),direct:g("833080"),bookmark:g("556543")}};function a(a){var c=a.spec,d=a.isActive;a=a.colorTheme;a=a===void 0?"light":a;var e=i[a];a=a==="dark"?"gray":"lightGray";return b("React").jsxs("div",{className:"_8glm",children:[b("React").jsx("div",{className:"_8gln",children:b("React").jsx(b("AdsMiniPreviewAbstractText.react"),{color:d?"blue":a,letterSpacing:"2px",lineHeight:"14px",children:c.callToAction})}),b("React").jsxs(b("FlexLayout.react"),{align:"center",className:"_8glq",children:[b("React").jsx("div",{className:"_8glr",children:b("React").jsx(b("Image.react"),{src:e.heart})}),b("React").jsx("div",{className:"_8glr",children:b("React").jsx(b("Image.react"),{src:e.chat})}),b("React").jsx("div",{className:"_8glr",children:b("React").jsx(b("Image.react"),{src:e.direct})}),c.mediaFormat==="CAROUSEL"&&c.carouselCards?b("React").jsx(j,{cardsCount:c.carouselCards.length}):null,b("React").jsx("div",{className:"_8gls",children:b("React").jsx(b("Image.react"),{src:e.bookmark})})]}),b("React").jsx("div",{className:"_8glt",children:d?b("React").jsx(b("AdsMiniPreviewAbstractText.react"),{color:a,letterSpacing:"2px",lineHeight:"14px",children:c.message}):null})]})}function j(a){a=a.cardsCount;return a<2?null:b("React").jsx(b("FlexLayout.react"),{className:"_8q4g",children:b("range")(0,a).map(function(a){return b("React").jsx("i",{className:"_8q4h"+(a===0?" _8q4i":"")},a)})})}e.exports=a}),null);
__d("useAdsImageAspectRatioWithCrops",["useAdsImageData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();a=b("useAdsImageData")(c?null:a);if(c){var d=c[0],e=d[0];d=d[1];c=c[1];var f=c[0];c=c[1];return c-d===0?null:(f-e)/(c-d)}return!a||a.height===0?null:a.width/a.height}e.exports=a}),null);
__d("AdsMiniPreviewImageVerticalCover.react",["AdsCroppedImage.react","AdsImageCover.react","React","useAdsImageAspectRatioWithCrops"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.crop,d=a.size;a=a.src;var e=b("useAdsImageAspectRatioWithCrops")(a,c);return e!=null&&e>1?b("React").jsx(b("AdsCroppedImage.react"),{crop:c||void 0,src:a}):b("React").jsx(b("AdsImageCover.react"),{crop:c||void 0,src:a,targetHeight:d,targetWidth:d})}e.exports=a}),null);
__d("AdsMiniPreviewUtils",["AdsAdgroupUtils","AdsChildAttachmentsUtils","first"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=["IMAGE","VIDEO"];function h(a){return g.includes(b("AdsAdgroupUtils").getMediaFormatForObjectType(a==null?void 0:(a=a.creative)==null?void 0:a.object_type))}a={isClientSideMiniPreviewSupportedDefault:function(a){return!b("AdsAdgroupUtils").isExistingPostWithStatus(a)&&!b("AdsChildAttachmentsUtils").isCarouselAd(a)&&h(a)},isClientSideMiniPreviewSupportedWithCarousel:function(a){return!b("AdsAdgroupUtils").isExistingPostWithStatus(a)&&h(a)},getAssetImageURL:function(a){return(a=i(a))==null?void 0:a.imageURL},getImageCrops:function(a){return(a=i(a))==null?void 0:a.imageCrops},getMedia:i};function i(a){if(a.mediaFormat==="CAROUSEL"){var c;return(c=b("first")(a.carouselCards||[]))==null?void 0:c.media}return a.media}e.exports=a}),null);
__d("AdsMiniPreviewIGFeed.react",["cx","AdsMiniPreviewFeedHeader.react","AdsMiniPreviewIGFeedFooter.react","AdsMiniPreviewImageVerticalCover.react","AdsMiniPreviewUtils","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("AdsMiniPreviewUtils").getAssetImageURL,i=b("AdsMiniPreviewUtils").getImageCrops;function a(a){var c=a.spec;a=a.scale;a=a===void 0?"macro":a;var d=c.profiles.instagram&&c.profiles.instagram.getValue(),e=h(c),f=i(c),g=e!=null;return b("React").jsxs("div",{className:"_8glh _8php"+(a==="micro"?" _8kaa":""),children:[b("React").jsx(b("AdsMiniPreviewFeedHeader.react"),{avatarSize:32,className:"_8glj",profile:d,showEllipsis:g}),b("React").jsx("div",{className:"_8glk",children:e!=null?b("React").jsx(b("AdsMiniPreviewImageVerticalCover.react"),{crop:f,size:320,src:e}):b("React").jsx("div",{className:"_8gll"})}),b("React").jsx(b("AdsMiniPreviewIGFeedFooter.react"),{isActive:g,spec:c})]})}e.exports=a}),null);
__d("AdsCreativeImageBackgroundEraserConstants",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={RESET:"RESET",PLUS:"PLUS",MINUS:"MINUS",UNDO:"UNDO"};b=[{name:"PLUS",label:g._("Keep"),instruction:g._("Mark the area you want to keep")},{name:"MINUS",label:g._("Erase"),instruction:g._("Mark the area you want to erase")}];c=468;d=468;e.exports={BUTTON_NAMES:a,IMAGE_HEIGHT:d,IMAGE_WIDTH:c,TOOLS:b}}),null);
__d("XSBAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ads/manager/tools/smart_background/automation/",{})}),null);
__d("XSmartBackgroundController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ads/manager/tools/smart_background/",{})}),null);
__d("BackgroundEraserUtils",["Promise","AdsCreativeImageBackgroundEraserConstants","AdsGraphAPI","AsyncRequest","XSBAController","XSmartBackgroundController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsCreativeImageBackgroundEraserConstants").IMAGE_HEIGHT,h=b("AdsCreativeImageBackgroundEraserConstants").IMAGE_WIDTH,i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,j={drawImageOnCanvas:function(a,c){return new(b("Promise"))(function(b){var d=new Image();d.onload=function(){a.clearRect(0,0,h,g),a.drawImage(d,0,0,h,g),b()};var e=c==null?"":c;d.src=e})},clearCanvases:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b.forEach(function(a){a!=null&&a.getContext("2d").clearRect(0,0,h,g)})},getProcessedPreview:function(a,c,d,e,f){__p&&__p();var i=document.createElement("canvas"),k=i.getContext("2d");i.width=h;i.height=h;return new(b("Promise"))(function(b,l){__p&&__p();var m=new Image();m.crossOrigin="Anonymous";m.onload=function(){__p&&__p();var a=new Image();a.crossOrigin="Anonymous";a.onload=function(){__p&&__p();var c=new Image();c.onload=function(){if(k){k.clearRect(0,0,h,g);k.drawImage(m,0,0,h,h);k.drawImage(c,0,0,h,h);var a=i.toDataURL();b(a)}else l(null)};j.getMaskCanvas(a,d,e,f).then(function(a){if(a!=null){a=a.toDataURL();c.src=a}})["catch"](function(){l(null)})};a.src=c};m.src=a})},getMaskCanvas:function(a,c,d,e){__p&&__p();return new(b("Promise"))(function(b){__p&&__p();var f=document.createElement("canvas"),i=f.getContext("2d");f.width=h;f.height=h;i.filter="blur("+e+"px)";i.drawImage(a,0,0,h,g);var k=i.getImageData(0,0,h,g);if(d!=null){var l=document.createElement("canvas"),m=l.getContext("2d");l.width=h;l.height=h;var n=new Image();n.onload=function(){m.drawImage(n,0,0,h,g);var c=m.getImageData(0,0,h,g);for(var a=0;a<k.data.length;a+=4)k.data[a]=c.data[a],k.data[a+1]=c.data[a+1],k.data[a+2]=c.data[a+2];i.putImageData(k,0,0);b(f)};n.crossOrigin="anonymous";n.src=d!=null?d:""}else{l=j.hexToRgb(c.topColor);var o=l.R,p=l.G;l=l.B;for(var q=0;q<k.data.length;q+=4)k.data[q]=o,k.data[q+1]=p,k.data[q+2]=l;i.putImageData(k,0,0);b(f)}})},resizeImage:function(a,c,d){__p&&__p();return new(b("Promise"))(function(b){__p&&__p();var e=new Image();e.crossOrigin="Anonymous";e.onload=function(){__p&&__p();var a=document.createElement("canvas"),f=a.getContext("2d");a.width=c;a.height=d;f.beginPath();f.rect(0,0,c,d);f.fillStyle="#808080";f.fill();f.drawImage(e,0,0,c,d);f=a.toDataURL();b(f)};e.src=a})},getSmartBackgroundRequest:function(a){var c=b("XSmartBackgroundController").getURIBuilder().getURI().toString();return new(b("AsyncRequest"))(c).setMethod("POST").setData(a)},getSBARequest:function(a){var c=b("XSBAController").getURIBuilder().getURI().toString();return new(b("AsyncRequest"))(c).setMethod("POST").setData(a)},saveImage:function(a,c,d){return b("AdsGraphAPI").get(e.id).adaccount(c).edge("adimages").post({bytes:d,name:a})},hexToRgb:function(a){a=i.exec(a);return a?{R:parseInt(a[1],16),G:parseInt(a[2],16),B:parseInt(a[3],16)}:{R:0,G:0,B:0}},isHexColor:function(a){return i.exec(a)!=null}};e.exports=j}),null);
__d("useMiniPreviewAssetDimensions",["AdsImageUtils","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsImageUtils").calculateCropAspectRatio,h=b("React").useEffect,i=b("React").useState,j=320,k=400;function a(a,b){__p&&__p();var c=i(k),d=c[0],e=c[1];c=i(1);var f=c[0],l=c[1];h(function(){__p&&__p();var c=!0;if(a!=null){var d=document.createElement("img");d.onload=function(){var a=b?g(b):d.width/d.height;c&&(e(Math.min(j/a,k)),l(a))};d.src=a;d.crossOrigin="anonymous"}return function(){c=!1}},[b,a]);return[d,f]}e.exports=a}),null);
__d("AdsMiniPreviewStoriesCanvas.react",["cx","AdsCroppedImage.react","AdsImageUtils","AdsMiniPreviewUtils","BackgroundEraserUtils","FlexLayout.react","React","immutable","useMiniPreviewAssetDimensions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsImageUtils").isNineBySixteenRatio,i=b("AdsMiniPreviewUtils").getAssetImageURL,j=b("AdsMiniPreviewUtils").getImageCrops,k=b("React").useMemo,l=b("React").useRef;c=b("immutable").Map;var m=50,n=10,o=568,p=35,q=70,r=c({small:12,medium:20});function a(a){__p&&__p();var c,d=a.spec,e=a.colors,f=a.captionFontSize;f=f===void 0?"medium":f;a=a.captionWidth;a=a===void 0?"normal":a;var g=(c=d.media)==null?void 0:c.backgroundColor;c=k(function(){return babelHelpers["extends"]({},e,g)},[e,g]);var l=i(d),o=j(d),p=b("useMiniPreviewAssetDimensions")(l,o),q=p[0];p=p[1];f=d.message!=null&&d.message!==""&&c&&!h(p)?b("React").jsx(t,{colors:c,content:d.message,size:f,width:a}):null;if(l!=null){a=p<1&&f!=null;p=a?m+n+q:m;d=v(d.callToAction!=null,a?q:void 0);return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(u,{colors:c}),a&&b("React").jsx("div",{className:"_8fot",children:b("React").jsx(b("AdsCroppedImage.react"),{crop:o||void 0,src:l})}),b("React").jsxs(s,{height:d,top:p,children:[!a&&b("React").jsx(b("AdsCroppedImage.react"),{crop:o||void 0,src:l}),f]})]})}return b("React").jsx(u,{colors:c})}function s(a){var c=a.children,d=a.height;a=a.top;return b("React").jsx(b("FlexLayout.react"),{align:"stretch",className:"_8fou",direction:"vertical",justify:"evenly",style:{height:d+"px",top:a+"px"},children:c})}function t(a){var c=a.colors,d=a.content,e=a.size;a=a.width;var f=l(null);c="rgba("+c.captionBackgroundColor+")";return b("React").jsx("div",{className:"_8fov"+(a==="normal"?" _8ghv":"")+(a==="wide"?" _8ghw":""),children:b("React").jsx("div",{className:"_8fow"+(e==="small"?" _8fox":"")+(e==="medium"?" _8foy":""),ref:f,style:{textAlign:y(f.current,e)},children:b("React").jsx("span",{className:(e==="small"?"_8foz":"")+(e==="medium"?" _8fo-":""),style:{color:c,backgroundColor:c},children:d})})})}function u(a){var c;a=a.colors;return(c=b("React")).jsxs(c.Fragment,{children:[c.jsx("div",{className:"_8fo_"}),c.jsx("div",{className:"_8fp0",style:{background:"linear-gradient(rgba("+x(a.topColor)+"), rgba("+x(a.bottomColor)+"))"}})]})}function v(a,b){a=w(a);return b!=null?o-m-n-b-a:o-m-a}function w(a){return a?q:p}function x(a){if(b("BackgroundEraserUtils").isHexColor(a)){var c=b("BackgroundEraserUtils").hexToRgb(a),d=c.R,e=c.G;c=c.B;return[d,e,c].join()}return a}function y(a,b){return a!=null&&a.offsetHeight===r.get(b)?"center":void 0}e.exports=a}),null);
__d("AdsMiniPreviewStoriesHeader.react",["cx","fbt","FlexLayout.react","FlexLayoutItem.react","Image.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c=a.spec;a=a.profile;return b("React").jsxs(b("FlexLayout.react"),{align:"center",className:"_8fp2",children:[b("React").jsx(b("FlexLayoutItem.react"),{className:"_8fp3",grow:0,shrink:0,children:a?b("React").jsx(b("Image.react"),{src:a.imageURL,width:36}):b("React").jsx("div",{className:"_8fp4"})}),b("React").jsx(b("FlexLayoutItem.react"),{className:a?"_8fp5":"",grow:1,children:b("React").jsx("span",{className:a?"":"_8fp6",children:a?a.name:h._("Page")})}),b("React").jsx(b("FlexLayoutItem.react"),{className:"_8fp7",grow:0,children:((a=c.media)==null?void 0:a.imageURL)!=null&&b("React").jsx(b("Image.react"),{className:"_8ghu",src:"/images/instagram/ads/preview/story-close.png"})})]})}e.exports=a}),null);
__d("AdsColorUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){a=a.split(",").map(Number);for(var b=0;b<3;b++){var c=a[b];c/=255;c=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4);a[b]=c}return.2126*a[0]+.7152*a[1]+.0722*a[2]}function a(a,b){a=[a,b].map(g);b=a[0];a=a[1];a=b>a?[b,a]:[a,b];b=a[0];a=a[1];b=(b+.05)/(a+.05);return Math.floor(b*100)/100}function b(a){__p&&__p();a=a.split(",").map(Number);var b=a[0],c=a[1],d=a[2];a=a[3];b=[b,c,d].map(function(a){return a/255});c=b[0];d=b[1];b=b[2];var e=Math.max(c,d,b),f=Math.min(c,d,b);f=e-f;var g=0;f===0?g=0:c===e?g=60*((d-b)/f%6):d===e?g=60*((b-c)/f+2):b===e&&(g=60*((c-d)/f+4));b=e===0?0:f/e;c=e;return[g,b,c,a]}function c(a){var b=a[0],c=a[1],d=a[2];a=a[3];c=d*c;var e=c*(1-Math.abs(b/60%2-1)),f=d-c;d=[0,0,0];b<60?d=[c,e,0]:b<120?d=[e,c,0]:b<180?d=[0,c,e]:b<240?d=[0,e,c]:b<300?d=[e,0,c]:b<360&&(d=[c,0,e]);return d.map(function(a){return Math.ceil((a+f)*255)}).concat(a).join(",")}d={contrastRatio:a,rgbaToHsva:b,hsvaToRgba:c};e.exports=d}),null);
__d("useMiniPreviewGradientColors",["AdsColorUtils","React","firstx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsColorUtils").contrastRatio,h=b("AdsColorUtils").hsvaToRgba,i=b("AdsColorUtils").rgbaToHsva,j=b("React").useEffect,k=b("React").useState,l="0,0,0",m="0,0,0,0",n={topColor:"223,225,229",bottomColor:"255,255,255",captionColor:"255,255,255",captionBackgroundColor:"0,0,0"};function a(a){__p&&__p();var b=k(n),c=b[0],d=b[1];j(function(){__p&&__p();var b=!0;if(a!=null){var c=new Image();c.onload=function(){var a=u(c),e=v(c),f=y(a,e),g=f[0];f=f[1];b&&d({topColor:a,bottomColor:e,captionColor:g,captionBackgroundColor:f!==m?f:g})};c.crossOrigin="anonymous";c.src=a}else d(n);return function(){b=!1}},[a]);return c}var o=0,p=.05;function q(a,b,c,d,e){var f=document.createElement("canvas");f.width=d;f.height=e;f=f.getContext("2d");f.width=d;f.height=e;f.clearRect(b,c,d,e);f.drawImage(a,b,c,d,e,o,o,d,e);return f}function r(a){__p&&__p();a=a.getImageData(o,o,a.width,a.height);var b={};for(var c=0;c<a.data.length;c+=4){var d=a.data.slice(c,c+4),e=d[0],f=d[1],g=d[2];d=d[3];e=[e,f,g,d].join(",");b[e]||(b[e]=0);b[e]++}return b}function s(a){return Object.entries(a).map(function(a){var b=a[0];a=a[1];return{rgba:b,count:Number(a)}}).sort(function(a,b){return b.count-a.count})}function t(a,c,d,e,f){a=q(a,c,d,e,f);c=r(a);d=s(c);return b("firstx")(d).rgba}function u(a){return t(a,o,o,a.width,a.height*p)}function v(a){var b=a.height*p;return t(a,o,a.height-b,a.width,b)}var w=4.5,x="255,255,255";function y(a,b){var c=[l,x];for(var d=0;d<c.length;d++){var e=g(c[d],a),f=g(c[d],b);if(e>=w&&f>=w)return[c[d],m]}return D(a,b)}var z="85,85,85,1",A="54,54,54,1",B="255,255,255,1",C=.2;function D(a,b){__p&&__p();if(a===z&&b===z)return[B,A];var c=i(a),d=x;c=[c[0],c[1],c[2]-(C<0?0:c[2]-C),c[3]];c=h(c);var e=g(d,c);a=[a,b];var f=[C,-1*C],j=[l,x];b=null;var k=w;a.forEach(function(a){f.forEach(function(f){j.forEach(function(j){var l=i(a),m=l[2]+f;m>1?m=1:m<0&&(m=0);m=h([l[0],l[1],m,l[3]]);l=g(j,m);l>e&&(e=l,d=j,c=m);j===x&&l>k&&(k=l,b=m)})})});b!==null&&(d=x,c=b);return[d,c]}e.exports=a}),null);
__d("AdsMiniPreviewIGStories.react",["cx","AdsMiniPreviewStoriesCanvas.react","AdsMiniPreviewStoriesHeader.react","React","useMiniPreviewGradientColors"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c,d=a.spec;a=a.scale;a=a===void 0?"macro":a;c=b("useMiniPreviewGradientColors")((c=d.media)==null?void 0:c.imageURL);return b("React").jsxs("div",{className:"_8fok"+(a==="micro"?" _8kaa":""),children:[b("React").jsx(b("AdsMiniPreviewStoriesHeader.react"),{profile:d.profiles.instagram&&d.profiles.instagram.getValue(),spec:d}),b("React").jsx(b("AdsMiniPreviewStoriesCanvas.react"),{captionFontSize:"medium",colors:c,spec:d}),b("React").jsx("div",{className:"_8fop",children:b("React").jsx("div",{className:"_8foq"})})]})}e.exports=a}),null);
__d("AdsMiniPreviewMobileFeed.react",["cx","AdsImageCover.react","AdsMiniPreviewAbstractText.react","AdsMiniPreviewFeedCard.react","AdsMiniPreviewFeedFooter.react","AdsMiniPreviewFeedHeader.react","AdsMiniPreviewImageVerticalCover.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){var c=a.spec;a=a.scale;a=a===void 0?"macro":a;var d=c.profiles.page&&c.profiles.page.getValue();return b("React").jsxs("div",{className:"_8e1_"+(a==="micro"?" _8kaa":""),children:[b("React").jsx(b("AdsMiniPreviewFeedHeader.react"),{avatarSize:44,className:"_8e26",fontWeight:"bold",profile:d}),b("React").jsx("div",{className:"_8e22",children:b("React").jsx(b("AdsMiniPreviewAbstractText.react"),{letterSpacing:"2px",children:c.message})}),b("React").jsx(h,{spec:c}),b("React").jsx(b("AdsMiniPreviewFeedFooter.react"),{colorTheme:"light",iconVariant:"outline",shouldShowIcons:l(c)})]})}function h(a){var c,d;a=a.spec;if(a.mediaFormat==="CAROUSEL")return b("React").jsx(j,{spec:a});c=(c=a.media)==null?void 0:c.imageURL;d=(d=a.media)==null?void 0:d.imageCrops;return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx("div",{className:"_8e24",children:c!=null?b("React").jsx(b("AdsMiniPreviewImageVerticalCover.react"),{crop:d,size:320,src:c}):b("React").jsx("div",{className:"_8e25"})}),b("React").jsx(b("AdsMiniPreviewFeedCard.react"),{callToAction:a.callToAction,className:"_8e2b",description:a.description,headline:a.headline})]})}var i={callToAction:null,description:null,displayLink:null,headline:null,media:null};function j(a){a=a.spec;a=[a.carouselCards&&a.carouselCards[0]?a.carouselCards[0]:i,a.carouselCards&&a.carouselCards[1]?a.carouselCards[1]:i];return b("React").jsxs("div",{className:"_8pb3",children:[b("React").jsx(k,{spec:a[0]}),b("React").jsx(k,{spec:a[1]})]})}function k(a){var c,d;a=a.spec;c=(c=a.media)==null?void 0:c.imageURL;d=(d=a.media)==null?void 0:d.imageCrops;return b("React").jsxs("div",{className:"_8pb4",children:[b("React").jsx("div",{className:"_8pb5",children:c!=null?b("React").jsx(b("AdsImageCover.react"),{crop:d||void 0,src:c,targetHeight:228,targetWidth:228}):b("React").jsx("div",{className:"_8pb6"})}),b("React").jsx("div",{className:c==null?"_8pb7":"",children:c!=null?b("React").jsx(b("AdsMiniPreviewFeedCard.react"),{callToAction:a.callToAction,className:"_8pb8",description:a.description,headline:a.headline}):null})]})}function l(a){var b=a.profiles.page&&a.profiles.page.getValue();if(a.mediaFormat==="CAROUSEL"){var c=a.carouselCards;return!c||c.length===0?!1:c.filter(function(a){return((a=a.media)==null?void 0:a.imageURL)!=null}).length===c.length}return!!b&&!!((c=a.media)==null?void 0:c.imageURL)}e.exports=a}),null);
__d("AdsPreviewsPluginCommon",[],(function(a,b,c,d,e,f){__p&&__p();function a(a,b,c){return!1}function b(a){return null}function c(a){return!1}function d(a){return null}function f(){return!1}e.exports={isClientSideSupported:a,renderClientSidePreview:b,isClientSideMiniPreviewSupported:c,renderClientSideMiniPreview:d,isEligibleForAdPersonalization:f}}),null);
__d("AdsPreviewsInstagramStandardPlugin",["fbt","ix","AdsMiniPreviewIGFeed.react","AdsMiniPreviewUtils","AdsPreviewsPluginCommon","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("AdsMiniPreviewUtils").isClientSideMiniPreviewSupportedWithCarousel;a=babelHelpers["extends"]({},b("AdsPreviewsPluginCommon"),{type:"previews",key:"previews/instagram_stream",apiFormat:"INSTAGRAM_STANDARD",customizationGroup:"INSTAGRAM_STREAM",name:g._("Instagram Feed"),positionName:g._("Feed"),positionDetails:null,icon:h("279340"),glyphV3:h("951654"),glyphActiveV3:h("951655"),isClientSideMiniPreviewSupported:function(a){return i(a)},renderClientSideMiniPreview:function(a){return b("React").jsx(b("AdsMiniPreviewIGFeed.react"),babelHelpers["extends"]({},a))}});e.exports=a}),null);
__d("AdsInstagramStoryPreviewConstants",[],(function(a,b,c,d,e,f){"use strict";e.exports={BOTTOM_MARGIN_BASE:18,BOTTOM_MARGIN_BASE_V2:42,BOTTOM_MARGIN_HAS_CTA:63,BOTTOM_MARGIN_HAS_DISCLAIMER:86,BOTTOM_MARGIN_HAS_CTA_HAS_DISCLAIMER:107,CAPTION_MAX_WIDTH:282,CAROUSEL_DURATION_IN_MS:5e3,CAROUSEL_INITIAL_SPACE:4,CAROUSEL_NON_9_BY_16_MEDIA_HEIGHT:318,CAROUSEL_NON_9_BY_16_DYNAMIC_MEDIA_HEIGHT:342,CAROUSEL_PRE_OPT_IN_VIDEO_MAX_DURATION_IN_MS:15e3,CAROUSEL_SEGMENT_BAR_WIDTH:312,DEFAULT_MEDIA_DURATION_IN_MS:5e3,DYNAMIC_MEDIA_OFFSET_HEIGHT:68,DYNAMIC_MEDIA_OFFSET_HEIGHT_ONE_LINE:50,DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT:24,DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT_ONE_LINE:6,FRAME_HEIGHT:565,FRAME_WIDTH:318,HORIZONTAL_MARGIN_CAPTION:48,LINE_HEIGHT:18,MAX_CAPTION_HEIGHT_WITH_FLAT_MEDIA:113,MAX_CAPTION_LINE_COUNT:6,MAX_FONT_SIZE:20,MIN_FONT_SIZE:13,MIN_SPACE:11,PROGRESS_BAR_ANIMATION_DURATION_IN_MS:250,TIMER_UPDATE_INTERVAL_IN_MS:250,TOP_MARGIN:44,UPDATE_TIMEOUT_IN_MS:25,VIDEO_STORY_TRUNCATION_LENGTH_IN_SEC:15,INITIAL_MEDIA_CARD_INDEX:0,OPT_IN_BUTTON_CLICK_ACTION:"OPT_IN_BUTTON_CLICK_ACTION",REPEAT_OPT_IN_FIRST_FRAME_ACTION:"REPEAT_OPT_IN_FIRST_FRAME_ACTION",PLAY_PREV_MEDIA_ACTION:"PLAY_PREV_MEDIA_ACTION",PLAY_NEXT_MEDIA_ACTION:"PLAY_NEXT_MEDIA_ACTION",SCHEDULE_AUTOPLAY:"SCHEDULE_AUTOPLAY"}}),null);
__d("AdsInstagramMultiMediaProgressBar.react",["AdsInstagramStoryPreviewConstants","Event","React","clearInterval","setInterval"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=(a=b("AdsInstagramStoryPreviewConstants")).CAROUSEL_INITIAL_SPACE,h=a.CAROUSEL_SEGMENT_BAR_WIDTH,i=a.DEFAULT_MEDIA_DURATION_IN_MS,j=a.PROGRESS_BAR_ANIMATION_DURATION_IN_MS,k=a.UPDATE_TIMEOUT_IN_MS;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={progressStartTime:0,animationStartTime:0,progressPercent:0,animationRemainingPercent:0,maxTimeDurationMS:j},c.$4=function(){var a=c.$6(),b=c.$5();c.setState({progressPercent:a,animationRemainingPercent:b})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1(),this.$2()};d.componentDidUpdate=function(a){this.props.firstFrame!==a.firstFrame&&this.setState({animationStartTime:Date.now(),animationRemainingPercent:100}),(this.props.mediaIndex!==a.mediaIndex||this.props.customMaxPlayDurationInMS!==a.customMaxPlayDurationInMS)&&this.$1(),this.props.mediaIndex!==a.mediaIndex&&this.$2()};d.componentWillUnmount=function(){b("clearInterval")(this.interval)};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.medias,e=c.mediaIndex,f=c.firstFrame,g=c.barClass,h=c.fillClass,i=this.state.progressPercent;return b("React").jsx("div",{children:d.map(function(c,j){c=d.length;if(c<1||f===!0&&j>0)return null;c=a.$3(j);var k=c.left;c=c.right;var l=(e-j)*100+i;l>100?l=100:l<0&&(l=0);return b("React").jsx("div",{className:g,style:{left:k,right:c},children:b("React").jsx("div",{className:h,style:{width:l+"%"}})},j)})})};d.$2=function(){this.setState({progressStartTime:Date.now()}),this.interval&&b("clearInterval")(this.interval),this.interval=b("setInterval")(this.$4,k)};d.$5=function(){var a=Date.now()-this.state.animationStartTime;a=(1-a/j)*100;return Math.max(0,a)};d.$6=function(){var a=this.state,b=a.maxTimeDurationMS;a=a.progressStartTime;var c=this.props.mediaRef.current!=null?this.props.mediaRef.current:this.props.medias[this.props.mediaIndex];c instanceof HTMLVideoElement?c=c.currentTime*1e3:c=(Date.now()-a)%b;return Math.max(0,c/b*100)};d.$1=function(){var a=this,c=this.props.mediaRef.current!=null?this.props.mediaRef.current:this.props.medias[this.props.mediaIndex],d=this.props.customMaxPlayDurationInMS,e=d!=null&&d>0?d:Infinity;c instanceof HTMLVideoElement?c.readyState>=c.HAVE_METADATA?this.setState({maxTimeDurationMS:Math.min(e,c.duration*1e3)}):b("Event").listen(c,"loadedmetadata",function(){a.setState({maxTimeDurationMS:Math.min(e,c.duration*1e3)})}):this.setState({maxTimeDurationMS:Math.min(e,i)})};d.$3=function(a){__p&&__p();var b=this.state.animationRemainingPercent,c=this.props.firstFrame===!0?1:this.props.medias.length,d,e,f=Math.floor(h/c),i=f*c;i=h-i;var j=g+Math.floor(i/2);i=g+Math.ceil(i/2);if(b==0)d=j+f*a,e=i+f*(c-a-1);else{var k=f*((c-1)/c);k=k*(1-b/100);b=f-k;if(a==0)d=j,e=j+k;else{f=j+b;j=c-1;b=a-1;d=f+k/j*b;e=i+k/j*(j-b-1)}}return{left:d,right:e}};return c}(b("React").Component);e.exports=c}),null);
__d("AdsInstagramPreviewStrings",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){"use strict";a={VIEW_PRODUCTS:h._("View Products"),IN_THIS_PHOTO:h._("In This Photo"),MORE_FROM_MERCHANT:function(a){return h._("More from {merchantUsername}",[h._param("merchantUsername",a)])},VIEW_ALL_PRODUCTS:h._("View All Products")};c={PAID_PARTNERSHIP_WITH:function(a){return h._("Paid partnership with {=[sponsor name]}",[h._param("=[sponsor name]",b("React").jsx("div",{className:"_843s",children:h._("{sponsor name}",[h._param("sponsor name",a)])}))])}};d={SPONSORED:h._("Sponsored"),KEEP_WATCHING:h._("Keep Watching")};e.exports={BRANDED_CONTENT_AD_STRINGS:c,COMMON_STRINGS:d,SHOPPING_AD_STRINGS:a}}),null);
__d("AdsInstagramStoryCarouselPreviewFunctionalComponents",["cx","ix","Image.react","React","XUICarouselArrow.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c,d=(c=b("React")).jsx(b("XUICarouselArrow.react"),{onClick:a.onClickLeft,children:c.jsx(b("Image.react"),{src:h("101565")})});a=c.jsx(b("XUICarouselArrow.react"),{onClick:a.onClickRight,children:c.jsx(b("Image.react"),{src:h("101566")})});return c.jsxs("div",{className:"_7mt7",children:[c.jsx("div",{className:"_3w7n _fy",children:d}),c.jsx("div",{className:"_3w7n _fx",children:a})]})}e.exports={AdsInstagramStoryCarouselArrows:a}}),null);
__d("AdsInstagramStoryPreviewCarouselVideoTimer.react",["cx","fbt","AdsInstagramStoryPreviewConstants","Event","React","clearInterval","formatDurationSeconds","setInterval"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AdsInstagramStoryPreviewConstants").CAROUSEL_PRE_OPT_IN_VIDEO_MAX_DURATION_IN_MS,j=b("AdsInstagramStoryPreviewConstants").TIMER_UPDATE_INTERVAL_IN_MS;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={timeLeftInSec:-1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this,c=this.props.video;c.readyState>=c.HAVE_METADATA?c.duration*1e3>i?this.interval=b("setInterval")(function(){return a.$1(c.duration)},j):this.setState({timeLeftInSec:-1}):b("Event").listen(c,"loadedmetadata",function(){c.duration*1e3>i?a.interval=b("setInterval")(function(){return a.$1(c.duration)},j):a.setState({timeLeftInSec:-1})})};d.componentWillUnmount=function(){this.interval&&b("clearInterval")(this.interval)};d.$1=function(a){var b=a-this.props.video.currentTime;this.setState(function(a){return{timeLeftInSec:b}})};d.render=function(){return b("React").jsx(b("React").Fragment,{children:this.state.timeLeftInSec>=0?b("React").jsxs("div",{style:{display:"inline-block"},children:[b("React").jsx("div",{className:"_6z3t"}),h._("{number of seconds}",[h._param("number of seconds",b("formatDurationSeconds")(Math.ceil(this.state.timeLeftInSec)))])]}):null})};return c}(b("React").Component);e.exports=a}),null);
__d("SubRipText",[],(function(a,b,c,d,e,f){__p&&__p();var g={size:"90%"};function h(a){__p&&__p();var b=Number(a.substr(0,a.length-1)),c=a.substr(-1);switch(c){case"s":return b;case"m":return b*60;case"h":return b*3600}c=a.split(":");b=Number(c[c.length-1].replace(/,/,"."));c.length>1&&(b+=Number(c[c.length-2])*60);c.length>2&&(b+=Number(c[c.length-3])*3600);return b}function i(a){__p&&__p();a=a.split(/\r\n|\r|\n/).map(function(a){return a.trim()});var b=[],c=0;do{var d=a.indexOf("",c);d<0&&(d=a.length);var e=k(a.slice(c,d));e&&b.push(e);c=d+1}while(c>0&&c<a.length);return b}function j(a){a=a.split("-->");if(a.length!=2)return null;var b=h(a[0].trim());a=h(a[1].trim());return Number.isNaN(a)||Number.isNaN(b)?null:{begin:b,end:a}}function k(a){if(a.length<3)return null;var b=l(a[0]),c=j(a[1]);return!c?null:{counter:b,begin:c.begin,end:c.end,text:a.slice(2,6)}}function l(a){return Number(a.trim())}function m(a){a=a.split(".");return a[0].length<2?"0"+a.join("."):a.join(".")}function n(a){var b=m(Math.floor(a/3600).toString()),c=m(Math.floor(a%3600/60).toString());a=m((a%60).toFixed(3));return b+":"+c+":"+a}function o(a,b,c){var d="";if(c)for(var e in c)d+=" "+e+":"+c[e];return n(a)+" --> "+n(b)+d}function p(a,b){return a.counter+"\n"+o(a.begin,a.end,b)+"\n"+a.text.join("\n")+"\n"}function q(a,b){return"WEBVTT\n\n"+a.map(function(a){return p(a,b)}).join("\n")}a=function(){"use strict";__p&&__p();function a(a){var b=this;this.$1=i(a);this.$1.sort(function(a,b){return a.counter-b.counter});this.$2=this.$1.map(function(a,b){return b}).sort(function(a,c){return b.$1[a].begin-b.$1[c].begin});this.invalidateCache();this.$6=g}var b=a.prototype;b.$7=function(a){return this.$1[this.$2[a]]};b.$8=function(a){var b=this.$3;while(b<this.$2.length){var c=this.$7(b);if(c.begin<=a)this.$4.push(c),b++;else break}this.$3=b};b.$9=function(a){this.$4=this.$4.filter(function(b){return b.end>a})};b.invalidateCache=function(){this.$5=0,this.$4=[],this.$3=0};b.setStyle=function(a){this.$6=a};b.getSubtitles=function(a){a<this.$5&&this.invalidateCache();this.$5=a;this.$8(a);this.$9(a);return this.$4.reduce(function(a,b){return a.concat(b.text)},[])};b.renderVTT=function(){return q(this.$1,this.$6)};return a}();e.exports=a}),null);
__d("AdsInstagramAdPreviewCustomHooks",["EventListener","React","SubRipText","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect,h=b("React").useRef;function i(a,c){if(a==null||c==null)return;var d=c.current;d instanceof HTMLVideoElement&&(Array.prototype.forEach.call(d.textTracks,function(a){return a.mode="hidden"}),b("EventListener").listen(d,"play",function(){Array.prototype.forEach.call(d.textTracks,function(b){b.mode="showing",a&&Array.prototype.forEach.call(b.cues,function(b){return b.line=a})})}))}function a(a,c,d){__p&&__p();var e=h(null);g(function(){var f=e.current,g=new(b("XHRRequest"))(a);a!==null&&f&&f instanceof HTMLTrackElement&&(g.setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){a=new(b("SubRipText"))(a);a=new Blob([a.renderVTT()],{type:"text/vtt"});a=URL.createObjectURL(a);f.src=a;i(c,d)}),g.send());return function(){g.abort()}},[a,c,d]);return e}e.exports={useVideoSubtitleTrack:a}}),null);
__d("AdsInstagramStoryProgressBar",["Event","Style","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=5e3,h=25;a={init:function(a,c,d){__p&&__p();var e,f=Date.now(),i=0,j,k=0,l=function a(){e&&(i=(Date.now()-f+i)%e,f=Date.now(),k=Math.max(0,i/e*100),b("Style").set(c,"width",k+"%")),j=b("setTimeout")(a,h)};if(a instanceof HTMLVideoElement){var m=a;d!=null&&typeof d==="number"&&d>0?e=d*1e3:m.readyState>=m.HAVE_METADATA?e=m.duration*1e3:b("Event").listen(m,"loadedmetadata",function(){e=m.duration*1e3});b("Event").listen(m,"timeupdate",function(){f=Date.now(),i=m.currentTime*1e3})}else e=g;j=b("setTimeout")(l,h);b("Event").listen(a,"DOMNodeRemoved",function(){return b("clearTimeout")(j)})}};e.exports=a}),null);
__d("AdsInstagramPreviewCommonUtils",["cx","fbt","AdsInstagramStoryProgressBar","DOM","DOMContainer.react","Image.react","Locale","React","UnicodeBidi"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(){return b("React").jsx(b("Image.react"),{className:"_86t",src:"/images/instagram/ads/preview/story-close.png"})}function c(a){a=b("UnicodeBidi").isDirectionRTL(a);var c=b("Locale").isRTL(),d="";a&&!c?d="rtl":!a&&c&&(d="ltr");return d}function d(a){var c=b("DOM").create("div",{className:a.fillClass});b("AdsInstagramStoryProgressBar").init(a.media,c);c=b("React").jsx(b("DOMContainer.react"),{children:c});return b("React").jsxs("div",{className:a.barClass,children:[" ",c," "]})}function f(a){var c;return(c=b("React")).jsxs("div",{className:"_6m_u",children:[c.jsx(b("Image.react"),{className:"_6m_v",src:a.profilePicUrl}),c.jsx("div",{className:"_6m_w",children:a.username}),c.jsx("div",{className:"_6m_x",children:h._("Sponsored")})]})}function i(a,b,c){var d=i.canvas=document.createElement("canvas");d=d.getContext("2d");d.font=b;b=c?a.replace(" ","").length*c:0;c=d.measureText(a);return c.width+b}e.exports={AdsInstagramCloseButton:a,AdsInstagramGetTextDirection:c,AdsInstagramProgressBar:d,AdsInstagramUserMetadata:f,getTextWidthForAdPreviewCaption:i}}),null);
__d("InstagramAdsPreview",["cssVar","csx","cx","CSS","DOMDimensions","DOMQuery","Event","Style"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j={truncateCaption:function(a,c,d,e,f){__p&&__p();var g=[],h,i=!1;c=parseInt("15px",c);Array.from(a.children).forEach(function(a){Array.from(a.children).forEach(function(a){g.push(a)})});var j=g[g.length-1],k=-1,l=e!=void 0&&f!=void 0;for(var m=0;m<g.length-1;m++){b("CSS").removeClass(g[m],"_50f0");var n=g[m].textContent;if(l&&b("DOMDimensions").getElementDimensions(f).width>e&&n!=void 0){m>=2&&k<m-2&&(n="\n"+n);m<g.length-2&&(n+="\n");k=m;b("Style").set(g[m],"word-break","break-all");g[m].innerText=n;h=b("DOMDimensions").getElementDimensions(a).height;if(h/c>d){i=!0;b("CSS").removeClass(j,"_50f0");var o=n.length;while(h/c>d&&o>=0)g[m].textContent=n.substring(0,o),h=b("DOMDimensions").getElementDimensions(a).height,o--;break}}else{h=b("DOMDimensions").getElementDimensions(a).height;if(h/c>d){i=!0;b("CSS").removeClass(j,"_50f0");while(h/c>d&&m>=0)b("CSS").addClass(g[m],"_50f0"),h=b("DOMDimensions").getElementDimensions(a).height,m--;break}}}b("CSS").removeClass(a,"_50f1");return i},setDynamicTextSizeForCaption:function(a,b,c,d,e,f){while(e-f>1){var g=Math.floor(f+(e-f)/2);j.setTextFontSizeForCaption(a,g);j.didElementDimensionOverflow(a,b,c,d,parseFloat(window.getComputedStyle(a,null).getPropertyValue("line-height")))?e=g:f=g}j.setTextFontSizeForCaption(a,e);if(!j.didElementDimensionOverflow(a,b,c,d,parseFloat(window.getComputedStyle(a,null).getPropertyValue("line-height"))))return;j.setTextFontSizeForCaption(a,f)},setTextFontSizeForCaption:function(a,c){b("Style").set(a,"font-size",c+"px")},didElementDimensionOverflow:function(a,c,d,e,f){a=b("DOMDimensions").getElementDimensions(a);return a.height>c||a.width>d||a.height/f>e},subscribeFocusEvent:function(a,c){__p&&__p();var d=b("DOMQuery").scry(a,"._2ru6");if(d.length!==1)return;d=d[0];var e=!1,f="_2ru4",g="_2ru5",h=b("DOMQuery").find(a,"._2ru5"),i=function(){if(e)return;var a=b("DOMQuery").find(h,"._2ru7");e=!0;b("CSS").removeClass(h,g);b("CSS").addClass(h,f);a.hasAttribute("src")&&a.setAttribute("src",c.focusImageSrc)},j=function(){if(!e)return;var a=b("DOMQuery").find(h,"._2ru7");e=!1;b("CSS").removeClass(h,f);b("CSS").addClass(h,g);a.hasAttribute("src")&&a.setAttribute("src",c.unfocusImageSrc)},k=function(a){return a instanceof HTMLVideoElement?!1:a instanceof HTMLImageElement};b("Event").listen(d,"click",function(a){k(a.srcElement)&&i()});b("Event").listen(document,"click",function(b){a.contains(b.target)||j()})},subscribeToggleEvent:function(a){var c=!1,d=b("DOMQuery").scry(a,".img");b("Event").listen(a,"click",function(a){c=!c;for(var a=0;a<d.length;a++)b("CSS").toggle(d[a])})},isDescendant:function(a,b,c){c=c||1;b=b.parentNode;while(c&&b){if(a==b)return!0;b=b.parentNode;c--}return!1},tokenizeCaption:function(a){__p&&__p();a=a.split(l).filter(function(a){return a!=null&&a!==""});var b=[];a.forEach(function(a){if(!a.startsWith("@")&&!a.startsWith("#")){var c=a.split(k).filter(function(a){return a!=null&&a!==""});c.forEach(function(a){return b.push(a)})}else b.push(a)});return b}},k=/((?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C])+|(?:(?:[\u0E01-\u0E3A\u0E40-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u1000-\u109F\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u19E0-\u19FF\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\u3400-\u4DB5\u4E00-\u9FEF\uA9E0-\uA9FE\uAA60-\uAA7F\uF900-\uFA6D\uFA70-\uFAD9\uFF66-\uFF6F\uFF71-\uFF9D]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67]|\uD83C\uDE00|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*))/,l=/([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)|(\B@[0-9A-Z_a-z]+(?:\.(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])[0-9A-Z_a-z]+)*)|(&?#(?:\\w)+)/;e.exports=j}),null);
__d("AdsInstagramStoryPreviewUtils",["cx","fbt","AdsInstagramStoryPreviewConstants","AdsInstagramStoryProgressBar","DOM","DOMContainer.react","InstagramAdsPreview","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AdsInstagramStoryPreviewConstants").CAROUSEL_INITIAL_SPACE,j=b("AdsInstagramStoryPreviewConstants").CAROUSEL_SEGMENT_BAR_WIDTH;function a(a){if(a.cta==null)return null;var c=a.ctaAppDestination==="MESSENGER"||a.ctaType==="MESSAGE_PAGE"?b("React").jsx("div",{className:"_88h5"}):null;return b("React").jsxs("div",{className:"_4kom"+(a.authorizationDisclaimer?" _4z29":""),children:[b("React").jsx("div",{className:"_3df2"}),c,a.cta]})}function c(a){return a.authorizationDisclaimer==null?null:b("React").jsx("div",{className:"_4z2b",children:b("React").jsx("div",{className:"_6mb8",children:a.authorizationDisclaimer})})}function d(a){__p&&__p();return b("React").jsx("div",{children:a.medias.map(function(c,d){__p&&__p();var e=a.medias.length;if(e<1)return null;var f=i+j/e*d;e=i+j/e*(e-d-1);var g;if(d<a.mediaIndex)g=b("React").jsx("div",{className:"_3y9r"});else if(d===a.mediaIndex){var h=b("DOM").create("div",{className:"_3y9t"});b("AdsInstagramStoryProgressBar").init(c,h);g=b("React").jsx(b("DOMContainer.react"),{children:h})}else g=b("React").jsx("div",{className:"_3y9t"});return b("React").jsx("div",{className:"_3y97",style:{left:f,right:e},children:g},d)})})}function f(a){return!a.isVisible?null:b("React").jsxs(b("ShimButton.react"),{style:{display:"inline-block",pointerEvents:"auto",cursor:"pointer"},onClick:a.onOptIn,children:[b("React").jsx("div",{className:"_6z3t"}),b("React").jsx("div",{className:"_6z3s"}),h._("Expand Story")]})}function k(a){a=[].concat(a.headline!=null&&a.headline!==""?b("InstagramAdsPreview").tokenizeCaption(a.headline).concat("\n"):[]).concat(a.caption!=null&&a.caption!==""?b("InstagramAdsPreview").tokenizeCaption(a.caption):[]);if(a.length===0)return null;a=a.map(function(a,c){return b("React").jsx("span",{className:(a.startsWith("@")||a.startsWith("#")?"_4mix":"")+" _50f0",children:a.indexOf("\n")!==-1?b("React").jsx("br",{}):a},c+":"+a)});return a}function g(a){var c;return(c=b("React")).jsxs(c.Fragment,{children:[c.jsx(k,{caption:a.caption,headline:a.headline}),c.jsxs("span",{className:"_50f0",children:[c.jsx("span",{children:h._("...")})," ",c.jsx("span",{className:"_66xg",children:h._("more")})]})]})}e.exports={AdsInstagramStoryPreviewCTA:a,AdsInstagramStoryPreviewDisclaimer:c,AdsInstagramStoryPreviewProgressBar:d,AdsInstagramStoryPreviewCarouselOptInButton:f,AdsInstagramStoryPreviewCaptionBlock:g}}),null);
__d("AdsInstagramStoryPreviewCaption.react",["cx","fbt","AdsInstagramPreviewCommonUtils","AdsInstagramStoryPreviewConstants","AdsInstagramStoryPreviewUtils","InstagramAdsPreview","React","Style","nullthrows","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AdsInstagramPreviewCommonUtils").AdsInstagramGetTextDirection,j=(c=b("AdsInstagramStoryPreviewConstants")).CAPTION_MAX_WIDTH,k=c.FRAME_WIDTH,l=c.HORIZONTAL_MARGIN_CAPTION,m=c.LINE_HEIGHT,n=c.MAX_CAPTION_LINE_COUNT,o=c.MAX_FONT_SIZE,p=c.MIN_FONT_SIZE,q=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewCaptionBlock,r=b("React").useRef;function a(a){var c,d=r(null),e=r(null);function f(){e.current!=null&&e.current.offsetHeight>0?s(a,d.current,e.current):b("requestAnimationFrame")(f)}b("requestAnimationFrame")(f);return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx("div",{className:"_7o7r",ref:d,style:{fontFamily:"Tahoma, Helvetica, Arial, sans-serif",color:(c=a.mediaCard.portalInfo)==null?void 0:c.captionColor},children:b("React").jsx("span",{className:"_7o7s",dir:i((c=(c=a.caption)!=null?c:a.headline)!=null?c:""),id:"non_9_x_16_story_caption_text",ref:e,style:{backgroundColor:(c=a.mediaCard.portalInfo)==null?void 0:c.captionBackgroundColor},children:b("React").jsx(q,{caption:a.caption,headline:a.headline})})}),a.isAutotranslated===!0&&b("React").jsx("div",{className:"_8ckx",style:{color:(c=a.mediaCard.portalInfo)==null?void 0:c.captionColor},children:h._("Automatically Translated")})]})}function s(a,c,d){__p&&__p();if(c==null||d==null)return;c=b("nullthrows")(c);d=b("nullthrows")(d);var e=Math.min(Math.floor(a.maxAvailableHeight/m),n),f=b("InstagramAdsPreview").truncateCaption(c,15,e,k,d);!f&&a.isFixedFontSize!==!0&&b("InstagramAdsPreview").setDynamicTextSizeForCaption(d,a.maxAvailableHeight,j,e,o,p);f=d.offsetWidth;a=(k-l-f)/2;b("Style").set(c,"left",a+"px");c.id="non_9_x_16_story_caption_block"}e.exports=a}),null);
__d("AdsInstagramStoryPreviewMediaCanvas.react",["cx","AdsInstagramAdPreviewCustomHooks","AdsInstagramStoryPreviewCaption.react","AdsInstagramStoryPreviewConstants","DOMContainer.react","LineClamp.react","React","gkx","nullthrows","qex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsInstagramAdPreviewCustomHooks").useVideoSubtitleTrack,i=(c=b("AdsInstagramStoryPreviewConstants")).BOTTOM_MARGIN_BASE,j=c.BOTTOM_MARGIN_BASE_V2,k=c.BOTTOM_MARGIN_HAS_CTA,l=c.BOTTOM_MARGIN_HAS_CTA_HAS_DISCLAIMER,m=c.BOTTOM_MARGIN_HAS_DISCLAIMER,n=c.DYNAMIC_MEDIA_OFFSET_HEIGHT,o=c.DYNAMIC_MEDIA_OFFSET_HEIGHT_ONE_LINE,p=c.DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT,q=c.DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT_ONE_LINE,r=c.FRAME_HEIGHT,s=c.FRAME_WIDTH,t=c.LINE_HEIGHT,u=c.MAX_CAPTION_HEIGHT_WITH_FLAT_MEDIA,v=c.MIN_SPACE,w=c.TOP_MARGIN,x=15;function y(a){var c;return(c=b("React")).jsxs(c.Fragment,{children:[c.jsx("div",{className:"_8mae",style:{bottom:A(a.mediaCard.cta!=null,a.authorizationDisclaimer!=null)},children:c.jsx(b("AdsInstagramStoryPreviewCaption.react"),{caption:a.caption,headline:a.headline,isAutotranslated:a.isAutotranslated,isFixedFontSize:!0,maxAvailableHeight:t*3,mediaCard:a.mediaCard})}),c.jsx("div",{className:"_7obv",children:c.jsx(z,babelHelpers["extends"]({},a))})]})}function z(a){__p&&__p();var c=h(a.mediaData.video_subtitle_url,a.mediaData.video_subtitle_offset,a.mediaRef);if(!b("gkx")("1156073"))return b("React").jsx(b("DOMContainer.react"),{children:a.mediaCard.media});if(a.mediaData.video_url!=null)return b("React").jsxs("video",{autoPlay:!0,className:"_7lg2",loop:a.mediaData.loop_video||a.isOptInStoriesCarousel,muted:!0,playendsec:a.mediaData.is_long_video===!0?x:null,poster:a.mediaData.image_url,ref:a.mediaRef,subtitleoffset:a.mediaData.video_subtitle_offset,subtitlessrc:a.mediaData.video_subtitle_url,children:[b("React").jsx("source",{src:a.mediaData.video_url,type:"video/mp4"}),b("React").jsx("track",{"default":!0,kind:"captions",ref:c})]});if(a.storyPreviewType==="dynamic_ad"){c=a.mediaData.headline!=""?b("React").jsx("div",{className:"_8q6o",children:b("React").jsx(b("LineClamp.react"),{lines:2,children:a.mediaData.headline})}):null;var d=a.mediaData.description!=""?b("React").jsx("div",{className:"_8q5w",children:a.mediaData.description}):null;return b("React").jsx("div",{className:"_7lg2",children:b("React").jsxs("div",{className:"_7mt8",children:[b("React").jsxs("div",{className:"_7mt9",children:[c,d]}),b("React").jsx("img",{className:"_7mta",id:"instagram_story_preview_media",ref:a.mediaRef,src:a.mediaData.image_url})]})})}return b("React").jsx("img",{className:"_7lg2",id:"instagram_story_preview_media",ref:a.mediaRef,src:a.mediaData.image_url})}function a(a){__p&&__p();if(a.mediaCard.portalInfo==null&&a.mediaCard.cropType!=="saliency")return b("React").jsx("div",{className:"_7obv",children:b("React").jsx(z,babelHelpers["extends"]({},a))});var c=b("gkx")("1143405"),d=b("qex")._("1143406")==="smart_cropping";if(a.mediaCard.cropType==="saliency"&&c&&d)return b("React").jsx(y,babelHelpers["extends"]({},a));d=b("nullthrows")((c=a.mediaCard.portalInfo)==null?void 0:c.displayHeight);c=b("nullthrows")((c=a.mediaCard.portalInfo)==null?void 0:c.displayWidth);var e=D(a.storyPreviewType,a.mediaCard.headline,a.mediaCard.description),f=c/(d+e.offsetHeight);d=d*s/c+e.scaledOffsetHeight;c=C(a.mediaCard.cta!=null,a.authorizationDisclaimer!=null,d,f);e=a.showHeadlineInCaption&&f>=1?a.headline:void 0;e=(a.caption==null||a.caption=="")&&(!a.showHeadlineInCaption||a.headline==null||a.headline=="")?null:b("React").jsx(b("AdsInstagramStoryPreviewCaption.react"),{caption:a.caption,headline:e,isAutotranslated:a.isAutotranslated,maxAvailableHeight:c,mediaCard:a.mediaCard});if(f>=1||e==null){c=B(a.mediaCard.cta!=null,a.authorizationDisclaimer!=null);return b("React").jsxs("div",{className:"_7obw",style:{height:c+"px",top:w+"px"},children:[b("React").jsx(z,babelHelpers["extends"]({},a)),e]})}else{f=B(a.mediaCard.cta!=null,a.authorizationDisclaimer!=null,d);return(c=b("React")).jsxs(c.Fragment,{children:[c.jsx("div",{className:"_7sx_",children:c.jsx(z,babelHelpers["extends"]({},a))}),c.jsx("div",{className:"_7obw",style:{height:f+"px",top:w+v+d+"px"},children:e})]})}}function A(a,b){i;a?a=b?l:k:a=b?m:j;return a}function B(a,b,c){a=A(a,b);return c!=null?r-w-v-c-a:r-w-a}function C(a,b,c,d){a=A(a,b);a=r-w-a;a=a-c-3*v;d>=1&&(a=b?u/2:u);return a}function D(a,b,c){if(a==="dynamic_ad"){if(b!==null&&b!==""&&c!==null&&c!=="")return{offsetHeight:n,scaledOffsetHeight:p};return(b===null||b==="")&&(c===null||c==="")?{offsetHeight:0,scaledOffsetHeight:0}:{offsetHeight:o,scaledOffsetHeight:q}}return{offsetHeight:0,scaledOffsetHeight:0}}e.exports=a}),null);
__d("AdsInstagramStoryCarouselAdPreview.react",["cx","AdsInstagramMultiMediaProgressBar.react","AdsInstagramPreviewStrings","AdsInstagramStoryCarouselPreviewFunctionalComponents","AdsInstagramStoryPreviewCarouselVideoTimer.react","AdsInstagramStoryPreviewConstants","AdsInstagramStoryPreviewMediaCanvas.react","AdsInstagramStoryPreviewUtils","Event","Image.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsInstagramPreviewStrings").COMMON_STRINGS,i=b("AdsInstagramStoryCarouselPreviewFunctionalComponents").AdsInstagramStoryCarouselArrows,j=(c=b("AdsInstagramStoryPreviewConstants")).CAROUSEL_DURATION_IN_MS,k=c.CAROUSEL_PRE_OPT_IN_VIDEO_MAX_DURATION_IN_MS,l=c.INITIAL_MEDIA_CARD_INDEX,m=c.OPT_IN_BUTTON_CLICK_ACTION,n=c.PLAY_NEXT_MEDIA_ACTION,o=c.PLAY_PREV_MEDIA_ACTION,p=c.REPEAT_OPT_IN_FIRST_FRAME_ACTION,q=c.SCHEDULE_AUTOPLAY,r=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewCarouselOptInButton,s=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewCTA,t=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewDisclaimer,u=b("React").useEffect,v=b("React").useReducer,w=b("React").useRef,x=1,y=-1,z=0,A=function(a,b,c){return(a+c+b)%b},B=function(a,b,c){if(a instanceof HTMLVideoElement){a=a;return b?Math.min(k,(a.duration-a.currentTime)*1e3):(a.duration-a.currentTime)*1e3}else if(!b){a=Date.now()-c;return j-a}return j},C=function(a){if(a instanceof HTMLVideoElement)return a.duration*1e3;else return j},D=function(a){a instanceof HTMLVideoElement&&(a.currentTime=0,b("Event").listen(a,"canplay",function(){return a.play()}))};function E(a,b){__p&&__p();var c;switch(b.type){case m:window.clearInterval(a.autoplayIntervalID);c=B(b.payload.medias[l],!1,a.firstFrameStartSetTime);return babelHelpers["extends"]({},a,{currentMediaCardIndex:l,isFirstFrame:!1,autoplayInterval:c,autoplayIntervalID:window.setInterval(function(){b.callback()},c)});case p:window.clearInterval(a.autoplayIntervalID);D(b.payload.medias[l]);c=B(b.payload.medias[l],!0,a.firstFrameStartSetTime);return babelHelpers["extends"]({},a,{currentMediaCardIndex:l,autoplayInterval:c,autoplayIntervalID:window.setInterval(function(){b.callback()},c),firstFrameStartSetTime:Date.now()});case o:window.clearInterval(a.autoplayIntervalID);var d=A(a.currentMediaCardIndex,b.payload.medias.length,y),e=b.payload.medias[d];c=C(e);D(e);return babelHelpers["extends"]({},a,{currentMediaCardIndex:d,autoplayInterval:c,autoplayIntervalID:window.setInterval(function(){b.callback()},c)});case n:window.clearInterval(a.autoplayIntervalID);e=A(a.currentMediaCardIndex,b.payload.medias.length,x);d=b.payload.medias[e];c=C(d);D(d);return babelHelpers["extends"]({},a,{currentMediaCardIndex:e,autoplayInterval:c,autoplayIntervalID:window.setInterval(function(){b.callback()},c)});case q:c=C(b.payload.medias[a.currentMediaCardIndex]);return babelHelpers["extends"]({},a,{autoplayInterval:c,autoplayIntervalID:window.setInterval(function(){b.callback()},c)});default:throw new Error()}}function F(a,b){b=a?B(b[l],!0,0):C(b[l]);return{autoplayIntervalID:null,autoplayInterval:b,currentMediaCardIndex:l,isFirstFrame:a,firstFrameStartSetTime:Date.now()}}function a(a){__p&&__p();var c=a.mediaCards.length,d=a.mediaCards.map(function(a){return a.media}),e=w(null),f=a.mediaCards[l].portalInfo!=null,g=a.storyPreviewType==="dynamic_ad",j=v(E,F(f,d)),B=j[0],C=j[1];j=a.mediaCards[B.currentMediaCardIndex];var D=a.mediaDataCollection[B.currentMediaCardIndex],G=a.headlines!=null&&a.headlines.length>B.currentMediaCardIndex?a.headlines[B.currentMediaCardIndex]:void 0;u(function(){B.autoplayIntervalID==null&&(B.isFirstFrame?J():I());return function(){window.clearInterval(B.autoplayIntervalID)}});var H=!B.isFirstFrame&&f&&j.media instanceof HTMLVideoElement?b("React").jsx(b("AdsInstagramStoryPreviewCarouselVideoTimer.react"),{video:j.media},B.currentMediaCardIndex):null;c=c>1&&!B.isFirstFrame?b("React").jsx(i,{onClickLeft:K,onClickRight:L}):null;K=B.isFirstFrame?B.autoplayInterval?B.autoplayInterval:k:null;K=b("React").jsx(b("AdsInstagramMultiMediaProgressBar.react"),{barClass:"_3y97",customMaxPlayDurationInMS:K,fillClass:"_3y9t",firstFrame:f&&B.isFirstFrame,mediaIndex:B.currentMediaCardIndex,mediaRef:e,medias:d});return b("React").jsx("div",{className:"_ogl",children:b("React").jsxs("div",{className:"_2qhi",id:"instagram_story_preview_frame",style:j.portalInfo&&{background:"linear-gradient("+j.portalInfo.topColor+", "+j.portalInfo.bottomColor+")"},children:[c,K,b("React").jsx(b("AdsInstagramStoryPreviewMediaCanvas.react"),{authorizationDisclaimer:a.authorizationDisclaimer,caption:a.caption,headline:G,isOptInStoriesCarousel:f,mediaCard:j,mediaData:D,mediaRef:e,showHeadlineInCaption:!g,storyPreviewType:a.storyPreviewType},B.currentMediaCardIndex),b("React").jsx("div",{className:"_ogm"}),b("React").jsxs("div",{className:"_86n",children:[b("React").jsx(b("Image.react"),{className:"_ogn",src:a.profilePicUrl}),b("React").jsx("div",{className:"_86q",children:a.username}),b("React").jsxs("div",{className:"_4z2a",children:[h.SPONSORED,b("React").jsx(r,{isVisible:B.isFirstFrame,onOptIn:M}),H]}),b("React").jsx(b("Image.react"),{className:"_86t",src:"/images/instagram/ads/preview/story-close.png"})]}),b("React").jsx(s,{authorizationDisclaimer:a.authorizationDisclaimer,cta:j.cta,ctaAppDestination:j.ctaAppDestination,ctaType:j.ctaType}),b("React").jsx(t,{authorizationDisclaimer:a.authorizationDisclaimer}),b("React").jsx(b("Image.react"),{className:"_86v"+(a.authorizationDisclaimer?" _4z29":""),src:"/images/instagram/ads/preview/story-ellipsis.png"})]})});function I(){N(function(){return C({type:q,callback:L,payload:{medias:d}})},z)}function J(){N(function(){return C({type:p,callback:J,payload:{medias:d}})},z)}function K(){N(function(){return C({type:o,callback:L,payload:{medias:d}})},y)}function L(){N(function(){return C({type:n,callback:L,payload:{medias:d}})},x)}function M(){N(function(){return C({type:m,callback:L,payload:{medias:d}})},z)}function N(a,c){c=A(B.currentMediaCardIndex,d.length,c);c=d[c];if(c instanceof HTMLVideoElement&&c.readyState<c.HAVE_METADATA){b("Event").listen(c,"loadedmetadata",function(){a()});return}a()}}e.exports=a}),null);
__d("AdsInstagramPollingSticker.react",["cx","AdsInstagramInteractiveComponentConstants","AdsInstagramStoryPreviewConstants","EmojiRenderer","InstagramAdsPreview","React","Style"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=(c=b("AdsInstagramInteractiveComponentConstants")).DEFAULT_OPTION_TEXT_SIZE,i=c.DEFAULT_POLLING_STICKER_WIDTH,j=c.MAX_OPTION_TEXT_LINE_COUNT,k=c.MAX_OPTION_TEXT_SIZE,l=c.MIN_OPTION_TEXT_SIZE,m=c.OPTION_BOX_TEXT_BLOCK_HEIGHT,n=c.OPTION_BOX_TEXT_BLOCK_WIDTH,o=b("AdsInstagramStoryPreviewConstants").FRAME_WIDTH,p=b("React").useEffect,q=b("React").useRef;function r(a){__p&&__p();if(!a||!a.offsetHeight)return;b("InstagramAdsPreview").setDynamicTextSizeForCaption(a,m-1,n,j,k,l);var c=(m-a.offsetHeight)/2;if(a.offsetHeight>=m){var d=parseInt(window.getComputedStyle(a,null).getPropertyValue("line-height"),10);d=d*j;b("Style").set(a,"maxHeight",d+"px");c=(m-d)/2}b("Style").set(a,"bottom",c+"px")}function s(a){var c=b("EmojiRenderer").parse(a.text),d=[],e=0;c.map(function(b){e<b.offset&&d.push({isEmoji:!1,text:a.text.substr(e,b.offset-e)}),d.push({isEmoji:!0,text:b.emoji.join("")}),e=b.offset+b.length});e<a.text.length&&d.push({isEmoji:!1,text:a.text.substr(e,a.text.length-e)});return b("React").jsx("div",{children:d.map(function(a,c){return b("React").jsx("span",{className:a.isEmoji?"":"_6-0b",children:a.text},a.text+"_"+c)})})}function t(a,c){__p&&__p();var d=c.current!=null?c.current:a,e=q(null);p(function(){if(e.current&&e.current instanceof HTMLElement&&d!=null){b("Style").set(e.current,"maxHeight","54px");var a=function(){r(e.current)};d instanceof window.HTMLMediaElement?d.readyState>3?a():d.addEventListener("canplaythrough",a):d instanceof window.HTMLImageElement&&d.addEventListener("load",a)}else r(e.current);return function(){d instanceof window.HTMLMediaElement?d.removeEventListener("canplaythrough"):d instanceof window.HTMLImageElement&&d.removeEventListener("load")}},[d]);return e}function a(a){var c=t(a.media,a.mediaRef),d=t(a.media,a.mediaRef),e=a.component,f=a.height,g=a.width,j=e.position_spec.x*g,k=e.position_spec.y*f,l=e.position_spec.width*o/i,m=360*e.position_spec.rotation;m="rotate("+m+"deg) scale("+l+")";a=[(l=a.component.poll_spec)==null?void 0:l.option_a_text,(l=a.component.poll_spec)==null?void 0:l.option_b_text].map(function(a){return(a||"").toUpperCase()});l=a[0];a=a[1];return b("React").jsxs("div",{className:"_6se2",style:{height:f,width:g,top:k,left:j,transform:m},children:[b("React").jsx("div",{className:"_6sfb"}),b("React").jsx("div",{className:"_6sfc"}),b("React").jsx("text",{className:"_6sfd",style:{fontFamily:"SFUIText-Heavy"},children:(f=e.poll_spec)==null?void 0:f.question_text}),b("React").jsx("div",{className:"_6sfe",children:b("React").jsx("div",{className:"_6sff",ref:c,style:{fontFamily:"aveny t reg",fontSize:h},children:b("React").jsx(s,{text:l})})}),b("React").jsx("div",{className:"_6sfg",children:b("React").jsx("div",{className:"_6sfh",ref:d,style:{fontFamily:"aveny t reg",fontSize:h},children:b("React").jsx(s,{text:a})})})]})}e.exports=a}),null);
__d("AdsInstagramInteractiveComponentList.react",["cx","AdsInstagramPollingSticker.react","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!a.components||a.components.size<1)return null;var c=a.components.map(function(c,d){return c.type===1?b("React").jsx(b("AdsInstagramPollingSticker.react"),{component:c,height:a.mediaHeight,media:a.media,mediaRef:a.mediaRef,width:a.mediaWidth},"polling_sticker_"+d):null});return b("React").jsx("div",{className:"_6se1",style:{height:a.mediaHeight},children:c})}e.exports=a}),null);
__d("AdsInstagramStorySingleFormatAdPreview.react",["cx","AdsInstagramInteractiveComponentList.react","AdsInstagramMultiMediaProgressBar.react","AdsInstagramPreviewStrings","AdsInstagramStoryPreviewConstants","AdsInstagramStoryPreviewMediaCanvas.react","AdsInstagramStoryPreviewUtils","Image.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("AdsInstagramPreviewStrings").BRANDED_CONTENT_AD_STRINGS,i=b("AdsInstagramPreviewStrings").COMMON_STRINGS,j=b("AdsInstagramStoryPreviewConstants").FRAME_HEIGHT,k=b("AdsInstagramStoryPreviewConstants").FRAME_WIDTH,l=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewCTA,m=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewDisclaimer,n=b("React").useRef;function a(a){var c=n(null),d=a.storyPreviewType==="long_video",e=a.brandedContentSponsorName;return b("React").jsx("div",{className:"_ogl",children:b("React").jsxs("div",{className:"_2qhi",id:"instagram_story_preview_frame",style:a.mediaCard.portalInfo&&{background:"linear-gradient("+a.mediaCard.portalInfo.topColor+", "+a.mediaCard.portalInfo.bottomColor+")"},children:[b("React").jsx(b("AdsInstagramStoryPreviewMediaCanvas.react"),{authorizationDisclaimer:a.authorizationDisclaimer,caption:a.caption,isAutotranslated:a.isAutotranslated,mediaCard:a.mediaCard,mediaData:a.mediaDataCollection[0],mediaRef:c,showHeadlineInCaption:!0,storyPreviewType:a.storyPreviewType}),a.mediaCard.interactiveComponents&&b("React").jsx(b("AdsInstagramInteractiveComponentList.react"),{components:a.mediaCard.interactiveComponents,media:a.mediaCard.media,mediaData:a.mediaDataCollection[0],mediaHeight:j,mediaRef:c,mediaWidth:k}),b("React").jsx("div",{className:"_ogm"}),b("React").jsxs("div",{className:"_86n",children:[b("React").jsx(b("AdsInstagramMultiMediaProgressBar.react"),{barClass:"_3y97",customMaxPlayDurationInMS:d?b("AdsInstagramStoryPreviewConstants").VIDEO_STORY_TRUNCATION_LENGTH_IN_SEC:null,fillClass:"_3y9t",firstFrame:!0,mediaIndex:0,mediaRef:c,medias:[a.mediaCard.media]}),b("React").jsx(b("Image.react"),{className:"_ogn",src:a.profilePicUrl}),b("React").jsx("div",{className:"_86q",children:a.username}),b("React").jsxs("div",{className:"_4z2a",children:[i.SPONSORED,e!=null&&b("React").jsxs("div",{style:{display:"inline"},children:[b("React").jsx("div",{className:"_82gj"}),h.PAID_PARTNERSHIP_WITH(e)]}),d===!0&&b("React").jsxs("div",{style:{display:"inline-block"},children:[b("React").jsx("div",{className:"_6z3t"}),b("React").jsx("div",{className:"_6z3s"}),i.KEEP_WATCHING]})]}),b("React").jsx(b("Image.react"),{className:"_86t",src:"/images/instagram/ads/preview/story-close.png"})]}),b("React").jsx(l,{authorizationDisclaimer:a.authorizationDisclaimer,cta:a.mediaCard.cta,ctaAppDestination:a.mediaCard.ctaAppDestination,ctaType:a.mediaCard.ctaType}),b("React").jsx(m,{authorizationDisclaimer:a.authorizationDisclaimer}),b("React").jsx(b("Image.react"),{className:"_86v"+(a.authorizationDisclaimer?" _4z29":""),src:"/images/instagram/ads/preview/story-ellipsis.png"})]})})}e.exports=a}),null);
__d("AdsInstagramStoryAdPreview.react",["AdsInstagramStoryCarouselAdPreview.react","AdsInstagramStorySingleFormatAdPreview.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var d=c.prototype;d.render=function(){if(this.props.adFormat==="single_media")return b("React").jsx(b("AdsInstagramStorySingleFormatAdPreview.react"),babelHelpers["extends"]({},this.props));else if(this.props.adFormat==="carousel")return b("React").jsx(b("AdsInstagramStoryCarouselAdPreview.react"),babelHelpers["extends"]({},this.props));return b("React").jsx("div",{})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("AdsInstagramStoryClientSideAdPreview.react",["AdsInstagramStoryAdPreview.react","React","useAdsImageData","useMiniPreviewGradientColors"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=.5625,h=.01,i=function(a){var b=document.createElement("img");b.setAttribute("src",(a=a==null?void 0:(a=a.media)==null?void 0:a.imageURL)!=null?a:"");return b},j=function(a,b){__p&&__p();var c,d,e,f,g,h,j,k,l,m,n,o,p,q,r=a.igStoryRenderProps;c=(c=a.message)!=null?c:"";d=(d=a.callToAction)!=null?d:"";var s=a.callToActionAppDestination;e=(e=a.description)!=null?e:"";f=(f=a.headline)!=null?f:"";var t=r==null?void 0:r.authorizationDisclaimer,u=r==null?void 0:r.brandedContentSponsorName;g=(g=r==null?void 0:r.mediaCard.cropType)!=null?g:"none";h=(h=r==null?void 0:r.mediaDataCollection[0].is_long_video)!=null?h:null;j=(j=r==null?void 0:r.mediaDataCollection[0].loop_video)!=null?j:!0;k=(k=r==null?void 0:r.mediaDataCollection[0].video_id)!=null?k:null;l=(l=r==null?void 0:r.mediaDataCollection[0].video_subtitle_offset)!=null?l:null;m=(m=r==null?void 0:r.mediaDataCollection[0].video_subtitle_url)!=null?m:null;n=(n=(n=r==null?void 0:r.mediaDataCollection[0].image_url)!=null?n:a==null?void 0:(n=a.media)==null?void 0:n.imageURL)!=null?n:"";o=(o=(o=r==null?void 0:r.mediaDataCollection[0].video_url)!=null?o:a==null?void 0:(o=a.media)==null?void 0:o.videoURL)!=null?o:"";p=(p=(p=r==null?void 0:r.profilePicUrl)!=null?p:(p=a.profiles.instagram)==null?void 0:(p=p.getValue())==null?void 0:p.imageURL)!=null?p:"";q=(q=(q=r==null?void 0:r.username)!=null?q:(q=a.profiles.instagram)==null?void 0:(q=q.getValue())==null?void 0:q.name)!=null?q:"";r=(r=r==null?void 0:r.mediaCard.portalInfo)!=null?r:b;return{adFormat:"single_media",authorizationDisclaimer:t,brandedContentSponsorName:u,caption:c,mediaCard:{cta:d,ctaAppDestination:s,description:e,headline:f,media:i(a),portalInfo:r==null?void 0:r,cropType:g},mediaDataCollection:[{image_url:n,description:e,headline:f,is_long_video:h,loop_video:j,video_id:k,video_subtitle_offset:l,video_subtitle_url:m,video_url:o}],profilePicUrl:p,username:q}};function a(a){var c,d;c=b("useAdsImageData")((c=a.renderSpec)==null?void 0:(c=c.media)==null?void 0:c.imageURL);d=b("useMiniPreviewGradientColors")((d=a.renderSpec)==null?void 0:(d=d.media)==null?void 0:d.imageURL);var e=c==null?!1:1*(c==null?void 0:c.width)/(c==null?void 0:c.height)<=g*(1+h);c=e?null:{displayHeight:(e=c==null?void 0:c.height)!=null?e:0,displayWidth:(e=c==null?void 0:c.width)!=null?e:0,bottomColor:(e=(c=a.renderSpec)==null?void 0:(e=c.media)==null?void 0:(c=e.backgroundColor)==null?void 0:c.bottomColor)!=null?e:"rgba("+d.bottomColor+")",captionColor:"rgba("+d.captionColor+")",topColor:(e=(c=a.renderSpec)==null?void 0:(e=c.media)==null?void 0:(c=e.backgroundColor)==null?void 0:c.topColor)!=null?e:"rgba("+d.topColor+")"};e=j(a.renderSpec,c);return b("React").jsx(b("AdsInstagramStoryAdPreview.react"),babelHelpers["extends"]({},e))}e.exports=a}),null);
__d("AdsPreviewsInstagramStoryPlugin",["fbt","ix","AdsAPIAdgroupRecordUtils","AdsAssetFeedUtils","AdsChildAttachmentsUtils","AdsCollectionsAdUtils","AdsInstagramStoryClientSideAdPreview.react","AdsMiniPreviewIGStories.react","AdsMiniPreviewUtils","AdsPreviewsPluginCommon","React","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AdsMiniPreviewUtils").isClientSideMiniPreviewSupportedWithCarousel;a=babelHelpers["extends"]({},b("AdsPreviewsPluginCommon"),{type:"previews",key:"previews/instagram_story",apiFormat:"INSTAGRAM_STORY",customizationGroup:"INSTAGRAM_STORY",name:g._("Instagram Stories"),positionName:g._("Stories"),positionDetails:null,icon:h("279341"),glyphV3:h("951666"),glyphActiveV3:h("951667"),isClientSideSupported:function(a,c,d,e,f){__p&&__p();if(!b("gkx")("1091317")&&f!==!0)return!1;if(d!=="PlacementEditorV2")return!1;if(b("AdsChildAttachmentsUtils").isCarouselAd(a))return!1;if(b("AdsAPIAdgroupRecordUtils").isExistingPostAd(a))return!1;if(j(a))return!1;if(b("AdsCollectionsAdUtils").isCollectionsAd(a.creative))return!1;if(b("AdsAssetFeedUtils").isDofAdgroupFromSpec(a))return!1;return b("AdsAssetFeedUtils").isRegularDCOAdgroupFromRecord(a)?!1:!0},renderClientSidePreview:function(a){a=a.renderSpec;return b("React").jsx(b("AdsInstagramStoryClientSideAdPreview.react"),{renderSpec:a})},isClientSideMiniPreviewSupported:function(a){return i(a)},renderClientSideMiniPreview:function(a){return b("React").jsx(b("AdsMiniPreviewIGStories.react"),babelHelpers["extends"]({},a))}});function j(a){return(a==null?void 0:(a=a.creative)==null?void 0:a.product_set_id)!=null}e.exports=a}),null);
__d("AdsPreviewsMobileFeedStandardPlugin",["fbt","ix","AdsMiniPreviewMobileFeed.react","AdsMiniPreviewUtils","AdsPreviewsPluginCommon","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AdsMiniPreviewUtils").isClientSideMiniPreviewSupportedWithCarousel;a=babelHelpers["extends"]({},b("AdsPreviewsPluginCommon"),{type:"previews",key:"previews/mobile_feed_standard",apiFormat:"MOBILE_FEED_STANDARD",customizationGroup:"FACEBOOK_FEED",name:g._("Mobile News Feed"),nameV2:g._("Facebook News Feed (Mobile)"),positionName:g._("News Feed"),positionDetails:g._("Mobile"),icon:h("22175"),glyph:h("517337"),glyphActive:h("552566"),glyphV3:h("951650"),glyphActiveV3:h("951651"),isLocationExtensionSupported:function(){return!0},isCustomOverlaysSupported:function(){return!0},isEligibleForAdPersonalization:function(){return!0},isVideoOverlaysSupported:function(){return!0},isClientSideMiniPreviewSupported:function(a){return i(a)},renderClientSideMiniPreview:function(a){return b("React").jsx(b("AdsMiniPreviewMobileFeed.react"),babelHelpers["extends"]({},a))}});e.exports=a}),null);
__d("AdsUEditorCampaignContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createContext({campaignEditorContext:null});e.exports=a}),null);
__d("AdsUEditorCampaignGroupContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createContext({campaignGroupEditorContext:null});e.exports=a}),null);
__d("AdsLoadObjectHooks",["Promise","AdsLoadObjectUtils","React","emptyFunction","objectValues"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=new(b("Promise"))(b("emptyFunction")),i=function(a){a=a.shouldSuspend;if(a)throw h;return null},j=function(a,c){var d=a.isLoading()||a.isEmpty()&&(c==null?void 0:c.suspendOnEmpty)===!0;return g(function(a){return b("React").jsx(i,{shouldSuspend:d})},[d])};a=function(a,c){a=b("AdsLoadObjectUtils").all(b("objectValues")(a));return j(a,c)};e.exports={useSuspendableLoadObject:j,useSuspendableStructuredState:a,SuspendWhenLoadingComponent:i}}),null);
__d("useSuspensefulAdsSelector",["AdsFluxHooks","AdsLoadObjectHooks"],(function(a,b,c,d,e,f){"use strict";var g=b("AdsFluxHooks").useAdsSelector,h=b("AdsLoadObjectHooks").useSuspendableStructuredState;a=function(a,b,c,d){a=g(a,b,c);b=h(a,d);return{state:a,SuspendWhenLoading:b}};e.exports=a}),null);
__d("AdsUEditorHooks",["AdsUEditorAdgroupContext","AdsUEditorCampaignContext","AdsUEditorCampaignGroupContext","React","nullthrows","useSuspensefulAdsSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext,h=function(){return b("nullthrows")(g(b("AdsUEditorCampaignGroupContext")).campaignGroupEditorContext)},i=function(){return b("nullthrows")(g(b("AdsUEditorCampaignContext")).campaignEditorContext)},j=function(){return b("nullthrows")(g(b("AdsUEditorAdgroupContext")).adgroupEditorContext)};a=function(a,c){var d=h();return b("useSuspensefulAdsSelector")(a,d,d,c)};c=function(a,c){var d=i();return b("useSuspensefulAdsSelector")(a,d,d,c)};d=function(a,c){var d=j();return b("useSuspensefulAdsSelector")(a,d,d,c)};f=function(a,c){var d=g(b("AdsUEditorCampaignGroupContext")).campaignGroupEditorContext,e=g(b("AdsUEditorCampaignContext")).campaignEditorContext,f=g(b("AdsUEditorAdgroupContext")).adgroupEditorContext;e=b("nullthrows")((f=(f=f)!=null?f:e)!=null?f:d);return b("useSuspensefulAdsSelector")(a,e,e,c)};e.exports={useUEditorCampaignGroupContext:h,useUEditorCampaignContext:i,useUEditorAdgroupContext:j,useUEditorCampaignGroupAdsSelector:a,useUEditorCampaignAdsSelector:c,useUEditorAdgroupAdsSelector:d,useUEditorAnyLevelAdsSelector:f}}),null);
__d("emptyArray",["makeImmutable"],(function(a,b,c,d,e,f){"use strict";a=b("makeImmutable")([],["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);e.exports=a}),null);
__d("AdPreviewLoadingOverlayTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PROGRESS_BAR:"progressbar",SHIMMER:"shimmer"})}),null);
__d("adsPreviewGetPageletAPIVersion",["AdsGraphAPI"],(function(a,b,c,d,e,f){"use strict";function a(){return"v"+b("AdsGraphAPI").getVersion()}e.exports=a}),null);
__d("AdPreview.react",["cx","fbt","AdPreviewLoadingOverlayTypes","AdsSpinnerCover.react","Arbiter","BUIAdoptionUtils","DOM","FBLogger","React","ReactDOM","SUIBusinessTheme","SUINotice.react","UIPagelet","WebApiApplication","adsPreviewGetPageletAPIVersion","getObjectValues","immutable","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isError:!1,isLoading:!1,errorLevel:null,errorMessage:null},d.$7=function(a){__p&&__p();if(d.$1==null)return;d.$1=null;d.setState({isError:!1,isLoading:!1});a();b("Arbiter").inform("AdPreview/PageletLoadSuccess",{component:babelHelpers.assertThisInitialized(d)});a=d.props.onPreviewLoadSuccess;a&&d.$2&&a({requestKey:d.$2});a=b("DOM").scry(d.$5(),"[data-preview-error]");a.length>0&&d.props.onPreviewRenderError&&d.props.onPreviewRenderError(a[0].innerText)},d.$8=function(a){if(d.$1==null)return;d.$1=null;d.setState({isError:!0,isLoading:!1});a=d.props.onPreviewLoadFailure;a&&d.$2&&a({requestKey:d.$2})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$3(this.props)};d.componentWillUnmount=function(){this.$2=null,this.$1&&this.$1.cancel(),this.$1=null,this.$4(),b("DOM").empty(this.$5())};d.UNSAFE_componentWillReceiveProps=function(a){this.$3(a)};d.render=function(){var a=!this.state.isError,c=this.state.isError&&!this.state.isLoading,d=this.state.errorLevel?this.state.errorLevel:"warn",e=this.state.errorMessage?this.state.errorMessage:h._("Unable to display a preview for this ad.");return b("React").jsx("div",{className:"_2hm6"+(this.state.isLoading?" _2hm7":""),children:b("React").jsxs("div",{className:this.props.className,children:[b("React").jsx(b("AdsSpinnerCover.react"),{background:this.props.spinnerBackgroundColor,className:"_4fap",show:this.state.isLoading,testID:this.props.spinnerTestID}),b("React").jsx("div",{className:c?"":"hidden_elem",children:b("React").jsx(b("SUINotice.react"),{theme:b("SUIBusinessTheme"),type:b("BUIAdoptionUtils").convertUseToType(d),children:e})}),b("React").jsx("div",{className:a?"":"hidden_elem","data-testid":this.props.apiFormat,ref:"pageletContainer"})]})})};d.$3=function(a){__p&&__p();var d=a.adAccountID,e=a.adgroupID,f=a.creativeID,g=a.creative,h=a.customPlayMode,i=a.lastForceUpdateTimeStamp,j=a.linkShareData,k=a.mockupID,l=a.apiFormat,m=a.appID,n=a.borderStyle,o=a.objective,p=a.productItemIDs,q=a.projectAccessToken,r=a.placePageID,s=a.postData;a=a.suppresslinks;var t=this.$6(d,e,f,g,h,l=="RIGHT_COLUMN_STANDARD"?void 0:j,l,m,n,o,p,r,s);if(t===this.$2&&(!i||this.props.lastForceUpdateTimeStamp===i))return;this.$1&&this.$1.cancel();this.$1=null;this.$2=t;l!==this.props.apiFormat&&(this.$4(),b("DOM").empty(this.$5()));if(!e&&!f&&!g){b("FBLogger")("ads").mustfix("AdPreview.react must be passed either adgroupID, creative or creativeID");this.setState({isError:!0,isLoading:!1});return}if(this.props.onValidate){i=this.props.onValidate(g,l);if(i.length){t=null;var u=null;i=i.filter(function(a){return a.field===c.PREVIEW_MESSAGE_FIELD_NAME});i.length&&(t=i[0].level,u=i[0].message);this.setState({isError:!0,isLoading:!1,errorLevel:t,errorMessage:u});return}}this.setState({isError:!1,isLoading:!0,errorLevel:null,errorMessage:null});this.$4();m||(m=b("WebApiApplication").getClientID());i=!!e;t=this.props.onPreviewLoadStart;t&&this.$2&&t({requestKey:this.$2});this.$1=b("UIPagelet").loadFromEndpoint(this.props.mockupID?"CrStAdPreviewPageletContainer":"AdPreviewPageletController",this.$5(),{adaccountid:d,adid:i?e:null,appid:m,creativeid:f,creative:i?null:g,customplaymode:h===void 0?null:h,linksharedata:l=="RIGHT_COLUMN_STANDARD"?void 0:j,loadingoverlay:this.props.loadingOverlay,skipDisclaimerForAN:this.props.skipDisclaimerForAN,mockupID:k,projectAccessToken:q,videodata:{ad_objective:o},format:l,borderstyle:n,productitemids:p,editable:this.props.editable,placePageID:r,postdata:s,suppresslinks:a,version:this.props.apiVersion?this.props.apiVersion:b("adsPreviewGetPageletAPIVersion")()},{append:!1,crossPage:!0,displayCallback:this.$7,errorHandler:this.$8,transportErrorHandler:this.$8,bundle:this.props.bundle!==void 0?this.props.bundle:!0})};d.$4=function(){var a=b("ReactDOM").findDOMNode(this.refs.pageletContainer);if(!a.querySelector)return;a=a.querySelectorAll(".UFILikeLink, .UFIList, .UFIBlingBox");for(var c=0,d=a.length;c<d;c++)b("ReactDOM").unmountComponentAtNode(a[c].parentNode)};d.$5=function(){return b("ReactDOM").findDOMNode(this.refs.pageletContainer)};d.$6=function(a,b,c,d,e,f,g,h,i,j,k,l,m){return[a,g,b,c,JSON.stringify(d),e,JSON.stringify(f),h,i,j,JSON.stringify(k),l,JSON.stringify(m)].join(":")};return c}(b("React").Component);a.PREVIEW_MESSAGE_FIELD_NAME="PREVIEW_MESSAGE_FIELD_NAME";a.propTypes={adAccountID:(c=b("prop-types")).string.isRequired,adgroupID:c.string,apiFormat:c.string.isRequired,apiVersion:c.string,appID:c.string,borderStyle:c.string,bundle:c.bool,creative:c.object,creativeID:c.string,customPlayMode:c.number,editable:c.bool,lastForceUpdateTimeStamp:c.number,linkShareData:c.object,loadingOverlay:c.oneOf(b("getObjectValues")(b("AdPreviewLoadingOverlayTypes"))),objective:c.string,placePageID:c.string,productItemIDs:c.array,projectAccessToken:c.string,suppresslinks:c.bool,onPreviewLoadFailure:c.func,onPreviewLoadStart:c.func,onPreviewLoadSuccess:c.func,onValidate:c.func};a.defaultProps={appID:b("WebApiApplication").getClientID(),editable:!1};e.exports=a}),null);
__d("AdsAdgroupPreviewClientSideContainer.react",["AdsAdgroupPreviewClientSide.react","AdsFluxHooks","AdsRenderSpecUtils","AdsUEditorHooks","React","adsPreviewRenderSpecSelector"],(function(a,b,c,d,e,f){"use strict";c=b("AdsFluxHooks").adsFluxContainer;var g=b("AdsFluxHooks").useAdsSelector,h=b("AdsUEditorHooks").useUEditorAdgroupContext;function a(a){var c=h();c=g(b("adsPreviewRenderSpecSelector"),c.adgroupEditorContext,c.adgroupEditorContext);c=b("AdsRenderSpecUtils").getPlacementRenderSpec(c,a.format);return!c?null:b("React").jsx(b("AdsAdgroupPreviewClientSide.react"),babelHelpers["extends"]({},a,{renderSpec:c}))}e.exports=c(a,null,{containerName:e.id})}),null);